~/Projects/cwltool/cwltool-tes/common-workflow-language ~/Projects/cwltool/cwltool-tes
--- Running conformance test v1.0 on /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes ---
/Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes 1.0.20170516234254
Test [1/87] 
Test [2/87] 
Test [3/87] 
Test [4/87] 
Test [5/87] 
Test [6/87] 
Test [7/87] 
Test [8/87] 
Test [9/87] 
Test [10/87] 
Test [11/87] 
Test [12/87] 
Test [13/87] 
Test [14/87] 
Test [15/87] 
Test [16/87] 
Test [17/87] 
Test [18/87] 
Test [19/87] 
Test [20/87] 
Test [21/87] 
Test [22/87] 
Test [23/87] 
Test [24/87] 
Test [25/87] 
Test [26/87] 
Test [27/87] 
Test [28/87] 
Test [29/87] 
Test [30/87] 
Test [31/87] 
Test [32/87] 
Test [33/87] 
Test [34/87] 
Test [35/87] 
Test [36/87] 
Test [37/87] 
Test [38/87] 
Test [39/87] 
Test [40/87] 
Test [41/87] 
Test [42/87] 
Test [43/87] 
Test [44/87] 
Test [45/87] 
No JSON object could be decoded

DIR JOB ----------------------
{'builder': <cwltool.builder.Builder object at 0x111d25610>,
 'collect_outputs': <functools.partial object at 0x111deb788>,
 'command_line': [u'echo', u'hello/world'],
 'docker_workdir': '/var/spool/cwl',
 'environment': {},
 'fs_access': <cwltool.stdfsaccess.StdFsAccess object at 0x111c1ff90>,
 'generatefiles': {'basename': '',
                   'class': 'Directory',
                   'listing': [],
                   'location': u'_:589b226c-60c1-49d5-962f-dadde638037a'},
 'hints': [],
 'joborder': ordereddict([('hello', ordereddict([('a', 'hello'), ('b', 'world')]))]),
 'name': u'schemadef-tool.cwl',
 'outdir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0er1sKHfBfrDy',
 'output_callback': <function output_callback at 0x111c69b90>,
 'pathmapper': <cwltool.pathmapper.PathMapper object at 0x111c6b110>,
 'permanentFailCodes': None,
 'pipeline': <cwltool_tes.tes.TESPipeline object at 0x111c1ff50>,
 'requirements': [ordereddict([('class', 'SchemaDefRequirement'), ('types', [ordereddict([('name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType'), ('type', 'record'), ('fields', [ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/a'), ('type', 'string')]), ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/b'), ('type', 'string')])])])]), (u'id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml'), (u'name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml')]),
                  ordereddict([('class', 'InlineJavascriptRequirement')])],
 'running': True,
 'spec': ordereddict([('class', 'CommandLineTool'), ('cwlVersion', 'v1.0'), ('requirements', [ordereddict([('class', 'SchemaDefRequirement'), ('types', [ordereddict([('name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType'), ('type', 'record'), ('fields', [ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/a'), ('type', 'string')]), ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/b'), ('type', 'string')])])])]), (u'id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml'), (u'name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml')]), ordereddict([('class', 'InlineJavascriptRequirement')])]), ('inputs', [ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-tool.cwl#hello'), ('type', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType'), ('inputBinding', ordereddict([('valueFrom', '$(self.a + "/" + self.b)')]))])]), ('outputs', [ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-tool.cwl#output'), ('type', 'File'), ('outputBinding', ordereddict([('glob', 'output.txt')]))])]), ('stdout', 'output.txt'), ('baseCommand', 'echo'), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-tool.cwl')]),
 'stagedir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmppDc8er',
 'stderr': None,
 'stdin': None,
 'stdout': 'output.txt',
 'successCodes': None,
 'temporaryFailCodes': None,
 'tmpdir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpmmsXuD'}
Got workflow error
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/cwltool/main.py", line 247, in single_job_executor
    r.run(**kwargs)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 243, in run
    task = self.create_task()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 168, in create_task
    input_parameters = self.collect_input_parameters()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 105, in collect_input_parameters
    self.create_input_parameter(k, v)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 96, in create_input_parameter
    'url': d['location'],
  File "/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ruamel/yaml/comments.py", line 680, in __getitem__
    return ordereddict.__getitem__(self, key)
KeyError: 'location'
Workflow error, try again with --debug for more information:
'location'

Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0er1sKH --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0er1sKH --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0er1sKH --quiet v1.0/schemadef-tool.cwl v1.0/schemadef-job.json
Test SchemaDefRequirement definition used in tool parameter

Compare failure expected: {
    "output": {
        "checksum": "sha1$f12e6cfe70f3253f70b0dbde17c692e7fb0f1e5e", 
        "class": "File", 
        "location": "output.txt", 
        "size": 12
    }
}
got: {}
caused by: failed comparison for key 'output': expected: {
    "checksum": "sha1$f12e6cfe70f3253f70b0dbde17c692e7fb0f1e5e", 
    "class": "File", 
    "location": "output.txt", 
    "size": 12
}
got: null
Test [46/87] 
No JSON object could be decoded

DIR JOB ----------------------
{'builder': <cwltool.builder.Builder object at 0x10a176f10>,
 'collect_outputs': <functools.partial object at 0x10a1e4158>,
 'command_line': [u'echo', u'hello/world'],
 'docker_workdir': '/var/spool/cwl',
 'environment': {},
 'fs_access': <cwltool.stdfsaccess.StdFsAccess object at 0x10a013f90>,
 'generatefiles': {'basename': '',
                   'class': 'Directory',
                   'listing': [],
                   'location': u'_:78805902-e5fd-4376-ab88-1257ecaf87a3'},
 'hints': [],
 'joborder': {u'hello': ordereddict([('a', 'hello'), ('b', 'world')])},
 'name': u'step1',
 'outdir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpNEQh5C',
 'output_callback': <functools.partial object at 0x10a1e4940>,
 'pathmapper': <cwltool.pathmapper.PathMapper object at 0x10a123050>,
 'permanentFailCodes': None,
 'pipeline': <cwltool_tes.tes.TESPipeline object at 0x10a013f50>,
 'requirements': [ordereddict([('class', 'SchemaDefRequirement'), ('types', [ordereddict([('name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType'), ('type', 'record'), ('fields', [ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/a'), ('type', 'string')]), ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/b'), ('type', 'string')])])])]), (u'id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml'), (u'name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml')]),
                  ordereddict([('class', 'SchemaDefRequirement'), ('types', [ordereddict([('name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType'), ('type', 'record'), ('fields', [ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/a'), ('type', 'string')]), ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/b'), ('type', 'string')])])])]), (u'id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml'), (u'name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml')]),
                  ordereddict([('class', 'InlineJavascriptRequirement')])],
 'running': True,
 'spec': ordereddict([('class', 'CommandLineTool'), ('cwlVersion', 'v1.0'), ('requirements', [ordereddict([('class', 'SchemaDefRequirement'), ('types', [ordereddict([('name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType'), ('type', 'record'), ('fields', [ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/a'), ('type', 'string')]), ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType/b'), ('type', 'string')])])])]), (u'id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml'), (u'name', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml')]), ordereddict([('class', 'InlineJavascriptRequirement')])]), ('inputs', [ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-tool.cwl#hello'), ('type', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-type.yml#HelloType'), ('inputBinding', ordereddict([('valueFrom', '$(self.a + "/" + self.b)')]))])]), ('outputs', [ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-tool.cwl#output'), ('type', 'File'), ('outputBinding', ordereddict([('glob', 'output.txt')]))])]), ('stdout', 'output.txt'), ('baseCommand', 'echo'), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/schemadef-tool.cwl')]),
 'stagedir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpIT0Zvl',
 'stderr': None,
 'stdin': None,
 'stdout': 'output.txt',
 'successCodes': None,
 'temporaryFailCodes': None,
 'tmpdir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpdQ8vvJ'}
Got workflow error
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/cwltool/main.py", line 247, in single_job_executor
    r.run(**kwargs)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 243, in run
    task = self.create_task()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 168, in create_task
    input_parameters = self.collect_input_parameters()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 105, in collect_input_parameters
    self.create_input_parameter(k, v)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 96, in create_input_parameter
    'url': d['location'],
  File "/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ruamel/yaml/comments.py", line 680, in __getitem__
    return ordereddict.__getitem__(self, key)
KeyError: 'location'
Workflow error, try again with --debug for more information:
'location'

Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0QCLcBL --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0QCLcBL --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0QCLcBL --quiet v1.0/schemadef-wf.cwl v1.0/schemadef-job.json
Test SchemaDefRequirement definition used in workflow parameter

Compare failure expected: {
    "output": {
        "checksum": "sha1$f12e6cfe70f3253f70b0dbde17c692e7fb0f1e5e", 
        "class": "File", 
        "location": "output.txt", 
        "size": 12
    }
}
got: {}
caused by: failed comparison for key 'output': expected: {
    "checksum": "sha1$f12e6cfe70f3253f70b0dbde17c692e7fb0f1e5e", 
    "class": "File", 
    "location": "output.txt", 
    "size": 12
}
got: null
Test [47/87] 
No JSON object could be decoded

DIR JOB ----------------------
{'builder': <cwltool.builder.Builder object at 0x10e2be910>,
 'collect_outputs': <functools.partial object at 0x10e106368>,
 'command_line': [u'true'],
 'docker_workdir': '/var/spool/cwl',
 'environment': {},
 'fs_access': <cwltool.stdfsaccess.StdFsAccess object at 0x10df3cf10>,
 'generatefiles': {'basename': '',
                   'class': 'Directory',
                   'listing': [],
                   'location': u'_:83c19b6f-5010-4c6a-b6d7-cf2751b2bb66'},
 'hints': [],
 'joborder': ordereddict([(u'bar', ordereddict([('baz', 'zab1'), ('b az', 2), ("b'az", True), ('b"az', None), ('buz', ['a', 'b', 'c'])]))]),
 'name': u'params.cwl',
 'outdir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.03t2eMsytLFqk',
 'output_callback': <function output_callback at 0x10df85b90>,
 'pathmapper': <cwltool.pathmapper.PathMapper object at 0x10e2becd0>,
 'permanentFailCodes': None,
 'pipeline': <cwltool_tes.tes.TESPipeline object at 0x10df3ced0>,
 'requirements': [],
 'running': True,
 'spec': ordereddict([('class', 'CommandLineTool'), ('cwlVersion', 'v1.0'), ('inputs', [ordereddict([('type', 'Any'), ('default', ordereddict([('baz', 'zab1'), ('b az', 2), ("b'az", True), ('b"az', None), ('buz', ['a', 'b', 'c'])])), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params.cwl#bar')])]), ('outputs', [ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t1'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t2'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t3'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs['bar'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t4'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs["bar"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t5'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar.baz)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t6'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs['bar'].baz)")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t7'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs[\'bar\']["baz"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t8'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['baz'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t9'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['b az'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t10'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['b\\'az'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t11'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar["b\'az"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t12'), ('type', 'null'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar[\'b"az\'])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t13'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '-$(inputs.bar.baz)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t14'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "-$(inputs['bar'].baz)")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t15'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '-$(inputs[\'bar\']["baz"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t16'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "-$(inputs.bar['baz'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t17'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar.baz) $(inputs.bar.baz)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t18'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs['bar'].baz) $(inputs['bar'].baz)")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t19'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs[\'bar\']["baz"]) $(inputs[\'bar\']["baz"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t20'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['baz']) $(inputs.bar['baz'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t21'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['b az']) $(inputs.bar['b az'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t22'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['b\\'az']) $(inputs.bar['b\\'az'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t23'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar["b\'az"]) $(inputs.bar["b\'az"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t24'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar[\'b"az\']) $(inputs.bar[\'b"az\'])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t25'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar.buz[1])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t26'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar.buz[1]) $(inputs.bar.buz[1])')]))])]), ('baseCommand', 'true'), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params.cwl')]),
 'stagedir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpaDKBre',
 'stderr': None,
 'stdin': None,
 'stdout': None,
 'successCodes': None,
 'temporaryFailCodes': None,
 'tmpdir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpQ1VBfN'}
Got workflow error
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/cwltool/main.py", line 247, in single_job_executor
    r.run(**kwargs)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 243, in run
    task = self.create_task()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 168, in create_task
    input_parameters = self.collect_input_parameters()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 105, in collect_input_parameters
    self.create_input_parameter(k, v)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 96, in create_input_parameter
    'url': d['location'],
  File "/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ruamel/yaml/comments.py", line 680, in __getitem__
    return ordereddict.__getitem__(self, key)
KeyError: 'location'
Workflow error, try again with --debug for more information:
'location'

Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.03t2eMs --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.03t2eMs --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.03t2eMs --quiet v1.0/params.cwl v1.0/empty.json
Test parameter evaluation, no support for JS expressions

Compare failure expected: {
    "t1": {
        "bar": {
            "b az": 2, 
            "b\"az": null, 
            "b'az": true, 
            "baz": "zab1", 
            "buz": [
                "a", 
                "b", 
                "c"
            ]
        }
    }, 
    "t10": true, 
    "t11": true, 
    "t12": null, 
    "t13": "-zab1", 
    "t14": "-zab1", 
    "t15": "-zab1", 
    "t16": "-zab1", 
    "t17": "zab1 zab1", 
    "t18": "zab1 zab1", 
    "t19": "zab1 zab1", 
    "t2": {
        "b az": 2, 
        "b\"az": null, 
        "b'az": true, 
        "baz": "zab1", 
        "buz": [
            "a", 
            "b", 
            "c"
        ]
    }, 
    "t20": "zab1 zab1", 
    "t21": "2 2", 
    "t22": "true true", 
    "t23": "true true", 
    "t24": "null null", 
    "t25": "b", 
    "t26": "b b", 
    "t3": {
        "b az": 2, 
        "b\"az": null, 
        "b'az": true, 
        "baz": "zab1", 
        "buz": [
            "a", 
            "b", 
            "c"
        ]
    }, 
    "t4": {
        "b az": 2, 
        "b\"az": null, 
        "b'az": true, 
        "baz": "zab1", 
        "buz": [
            "a", 
            "b", 
            "c"
        ]
    }, 
    "t5": "zab1", 
    "t6": "zab1", 
    "t7": "zab1", 
    "t8": "zab1", 
    "t9": 2
}
got: {}
caused by: failed comparison for key 't25': expected: "b"
got: null
Test [48/87] 
No JSON object could be decoded

DIR JOB ----------------------
{'builder': <cwltool.builder.Builder object at 0x1056239d0>,
 'collect_outputs': <functools.partial object at 0x10546a4c8>,
 'command_line': [u'true'],
 'docker_workdir': '/var/spool/cwl',
 'environment': {},
 'fs_access': <cwltool.stdfsaccess.StdFsAccess object at 0x1052a0f10>,
 'generatefiles': {'basename': '',
                   'class': 'Directory',
                   'listing': [],
                   'location': u'_:64d956a5-399d-469c-8530-ef09bd940bec'},
 'hints': [],
 'joborder': ordereddict([(u'bar', ordereddict([('baz', 'zab1'), ('b az', 2), ("b'az", True), ('b"az', None), ('buz', ['a', 'b', 'c'])]))]),
 'name': u'params2.cwl',
 'outdir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0T1bgJggoU6n7',
 'output_callback': <function output_callback at 0x1052e9b90>,
 'pathmapper': <cwltool.pathmapper.PathMapper object at 0x105623dd0>,
 'permanentFailCodes': None,
 'pipeline': <cwltool_tes.tes.TESPipeline object at 0x1052a0ed0>,
 'requirements': [ordereddict([('class', 'InlineJavascriptRequirement')])],
 'running': True,
 'spec': ordereddict([('class', 'CommandLineTool'), ('cwlVersion', 'v1.0'), ('requirements', [ordereddict([('class', 'InlineJavascriptRequirement')])]), ('inputs', [ordereddict([('type', 'Any'), ('default', ordereddict([('baz', 'zab1'), ('b az', 2), ("b'az", True), ('b"az', None), ('buz', ['a', 'b', 'c'])])), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params2.cwl#bar')])]), ('outputs', [ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t1'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t2'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t3'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs['bar'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t4'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs["bar"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t5'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar.baz)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t6'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs['bar'].baz)")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t7'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs[\'bar\']["baz"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t8'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['baz'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t9'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['b az'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t10'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['b\\'az'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t11'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar["b\'az"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t12'), ('type', 'null'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar[\'b"az\'])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t13'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '-$(inputs.bar.baz)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t14'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "-$(inputs['bar'].baz)")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t15'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '-$(inputs[\'bar\']["baz"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t16'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "-$(inputs.bar['baz'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t17'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar.baz) $(inputs.bar.baz)')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t18'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs['bar'].baz) $(inputs['bar'].baz)")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t19'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs[\'bar\']["baz"]) $(inputs[\'bar\']["baz"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t20'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['baz']) $(inputs.bar['baz'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t21'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['b az']) $(inputs.bar['b az'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t22'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', "$(inputs.bar['b\\'az']) $(inputs.bar['b\\'az'])")]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t23'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar["b\'az"]) $(inputs.bar["b\'az"])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t24'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar[\'b"az\']) $(inputs.bar[\'b"az\'])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t25'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar.buz[1])')]))]), ordereddict([('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params_inc.yml#t26'), ('type', 'Any'), ('outputBinding', ordereddict([('outputEval', '$(inputs.bar.buz[1]) $(inputs.bar.buz[1])')]))])]), ('baseCommand', 'true'), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/params2.cwl')]),
 'stagedir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpOtfQgO',
 'stderr': None,
 'stdin': None,
 'stdout': None,
 'successCodes': None,
 'temporaryFailCodes': None,
 'tmpdir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpVkafQ8'}
Got workflow error
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/cwltool/main.py", line 247, in single_job_executor
    r.run(**kwargs)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 243, in run
    task = self.create_task()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 168, in create_task
    input_parameters = self.collect_input_parameters()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 105, in collect_input_parameters
    self.create_input_parameter(k, v)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 96, in create_input_parameter
    'url': d['location'],
  File "/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ruamel/yaml/comments.py", line 680, in __getitem__
    return ordereddict.__getitem__(self, key)
KeyError: 'location'
Workflow error, try again with --debug for more information:
'location'

Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0T1bgJg --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0T1bgJg --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0T1bgJg --quiet v1.0/params2.cwl v1.0/empty.json
Test parameter evaluation, with support for JS expressions

Compare failure expected: {
    "t1": {
        "bar": {
            "b az": 2, 
            "b\"az": null, 
            "b'az": true, 
            "baz": "zab1", 
            "buz": [
                "a", 
                "b", 
                "c"
            ]
        }
    }, 
    "t10": true, 
    "t11": true, 
    "t12": null, 
    "t13": "-zab1", 
    "t14": "-zab1", 
    "t15": "-zab1", 
    "t16": "-zab1", 
    "t17": "zab1 zab1", 
    "t18": "zab1 zab1", 
    "t19": "zab1 zab1", 
    "t2": {
        "b az": 2, 
        "b\"az": null, 
        "b'az": true, 
        "baz": "zab1", 
        "buz": [
            "a", 
            "b", 
            "c"
        ]
    }, 
    "t20": "zab1 zab1", 
    "t21": "2 2", 
    "t22": "true true", 
    "t23": "true true", 
    "t24": "null null", 
    "t25": "b", 
    "t26": "b b", 
    "t3": {
        "b az": 2, 
        "b\"az": null, 
        "b'az": true, 
        "baz": "zab1", 
        "buz": [
            "a", 
            "b", 
            "c"
        ]
    }, 
    "t4": {
        "b az": 2, 
        "b\"az": null, 
        "b'az": true, 
        "baz": "zab1", 
        "buz": [
            "a", 
            "b", 
            "c"
        ]
    }, 
    "t5": "zab1", 
    "t6": "zab1", 
    "t7": "zab1", 
    "t8": "zab1", 
    "t9": 2
}
got: {}
caused by: failed comparison for key 't25': expected: "b"
got: null
Test [49/87] 
Test [50/87] 
Test [51/87] 
Test [52/87] 
Test [53/87] 
Test [54/87] 
Test [55/87] 
Test [56/87] 
Test [57/87] 
No JSON object could be decoded

DIR JOB ----------------------
{'builder': <cwltool.builder.Builder object at 0x110dce410>,
 'collect_outputs': <functools.partial object at 0x110ddc8e8>,
 'command_line': ['/bin/sh',
                  '-c',
                  u"'cat' '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpSqiBju/stgca37ca86-191b-4fcb-abc4-eedcc8b4d7dc/whale.txt' > foo && 'cat' '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpSqiBju/stg7c5d6cce-de42-4aa7-877a-5d483cd9bf9b/ref.fasta' > bar"],
 'docker_workdir': '/var/spool/cwl',
 'environment': {},
 'fs_access': <cwltool.stdfsaccess.StdFsAccess object at 0x110c07f90>,
 'generatefiles': {'basename': '',
                   'class': 'Directory',
                   'listing': [],
                   'location': u'_:1b0e237e-3baf-4d09-8b32-b4fca8f6b7dc'},
 'hints': [],
 'joborder': ordereddict([('irec', ordereddict([('ifoo', ordereddict([('location', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/whale.txt'), ('class', 'File'), ('basename', 'whale.txt'), ('path', '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpSqiBju/stgca37ca86-191b-4fcb-abc4-eedcc8b4d7dc/whale.txt'), ('dirname', '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpSqiBju/stgca37ca86-191b-4fcb-abc4-eedcc8b4d7dc'), ('nameroot', 'whale'), ('nameext', '.txt')])), ('ibar', ordereddict([('location', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/ref.fasta'), ('class', 'File'), ('basename', 'ref.fasta'), ('path', '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpSqiBju/stg7c5d6cce-de42-4aa7-877a-5d483cd9bf9b/ref.fasta'), ('dirname', '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpSqiBju/stg7c5d6cce-de42-4aa7-877a-5d483cd9bf9b'), ('nameroot', 'ref'), ('nameext', '.fasta')]))]))]),
 'name': u'record-output.cwl',
 'outdir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0uO7Ujx5CumDs',
 'output_callback': <function output_callback at 0x110c51b90>,
 'pathmapper': <cwltool.pathmapper.PathMapper object at 0x110c47f10>,
 'permanentFailCodes': None,
 'pipeline': <cwltool_tes.tes.TESPipeline object at 0x110c07f50>,
 'requirements': [ordereddict([('class', 'ShellCommandRequirement')])],
 'running': True,
 'spec': ordereddict([('class', 'CommandLineTool'), ('cwlVersion', 'v1.0'), ('requirements', [ordereddict([('class', 'ShellCommandRequirement')])]), ('inputs', [ordereddict([('type', ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl#irec/irec'), ('type', 'record'), ('fields', [ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl#irec/irec/ifoo'), ('type', 'File'), ('inputBinding', ordereddict([('position', 2)]))]), ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl#irec/irec/ibar'), ('type', 'File'), ('inputBinding', ordereddict([('position', 6)]))])])])), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl#irec')])]), ('outputs', [ordereddict([('type', ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl#orec/orec'), ('type', 'record'), ('fields', [ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl#orec/orec/ofoo'), ('type', 'File'), ('outputBinding', ordereddict([('glob', 'foo')]))]), ordereddict([('name', u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl#orec/orec/obar'), ('type', 'File'), ('outputBinding', ordereddict([('glob', 'bar')]))])])])), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl#orec')])]), ('arguments', [ordereddict([('valueFrom', 'cat'), ('position', 1)]), ordereddict([('valueFrom', '> foo'), ('position', 3), ('shellQuote', False)]), ordereddict([('valueFrom', '&&'), ('position', 4), ('shellQuote', False)]), ordereddict([('valueFrom', 'cat'), ('position', 5)]), ordereddict([('valueFrom', '> bar'), ('position', 7), ('shellQuote', False)])]), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/record-output.cwl')]),
 'stagedir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpSqiBju',
 'stderr': None,
 'stdin': None,
 'stdout': None,
 'successCodes': None,
 'temporaryFailCodes': None,
 'tmpdir': '/private/var/folders/0m/1_fxvv_j2d547fv68x6ps_qw2h59vq/T/tmpzUnaVt'}
Got workflow error
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/cwltool/main.py", line 247, in single_job_executor
    r.run(**kwargs)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 243, in run
    task = self.create_task()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 168, in create_task
    input_parameters = self.collect_input_parameters()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 105, in collect_input_parameters
    self.create_input_parameter(k, v)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 96, in create_input_parameter
    'url': d['location'],
  File "/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/ruamel/yaml/comments.py", line 680, in __getitem__
    return ordereddict.__getitem__(self, key)
KeyError: 'location'
Workflow error, try again with --debug for more information:
'location'

Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0uO7Ujx --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0uO7Ujx --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0uO7Ujx --quiet v1.0/record-output.cwl v1.0/record-output-job.json
Test record type output binding.
Compare failure expected: {
    "orec": {
        "obar": {
            "checksum": "sha1$aeb3d11bdf536511649129f4077d5cda6a324118", 
            "class": "File", 
            "location": "bar", 
            "size": 12010
        }, 
        "ofoo": {
            "checksum": "sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376", 
            "class": "File", 
            "location": "foo", 
            "size": 1111
        }
    }
}
got: {}
caused by: failed comparison for key 'orec': expected: {
    "obar": {
        "checksum": "sha1$aeb3d11bdf536511649129f4077d5cda6a324118", 
        "class": "File", 
        "location": "bar", 
        "size": 12010
    }, 
    "ofoo": {
        "checksum": "sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376", 
        "class": "File", 
        "location": "foo", 
        "size": 1111
    }
}
got: null
Test [58/87] 
Test [59/87] 
Test [60/87] 
Test [61/87] 
Test [62/87] 
Test [63/87] 
Test [64/87] 
Test [65/87] 
Test [66/87] 
Test [67/87] 
Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0yWf2B9 --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0yWf2B9 --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0yWf2B9 --quiet v1.0/dir.cwl v1.0/dir-job.yml
Test directory input with parameter reference
Compare failure expected: {
    "outlist": {
        "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592", 
        "class": "File", 
        "location": "output.txt", 
        "size": 20
    }
}
got: {
    "outlist": {
        "basename": "output.txt", 
        "checksum": "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa", 
        "class": "File", 
        "http://commonwl.org/cwltool#generation": 0, 
        "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0yWf2B9/output.txt", 
        "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0yWf2B9/output.txt", 
        "size": 2
    }
}
caused by: failed comparison for key 'outlist': expected: {
    "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592", 
    "class": "File", 
    "location": "output.txt", 
    "size": 20
}
got: {
    "basename": "output.txt", 
    "checksum": "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa", 
    "class": "File", 
    "http://commonwl.org/cwltool#generation": 0, 
    "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0yWf2B9/output.txt", 
    "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0yWf2B9/output.txt", 
    "size": 2
}
caused by: field 'checksum' failed comparison: expected: "sha1$13cda8661796ae241da3a18668fb552161a72592"
got: "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa"
Test [68/87] 
Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0NhR9I1 --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0NhR9I1 --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0NhR9I1 --quiet v1.0/dir2.cwl v1.0/dir-job.yml
Test directory input in Docker
Compare failure expected: {
    "outlist": {
        "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592", 
        "class": "File", 
        "location": "output.txt", 
        "size": 20
    }
}
got: {
    "outlist": {
        "basename": "output.txt", 
        "checksum": "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa", 
        "class": "File", 
        "http://commonwl.org/cwltool#generation": 0, 
        "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0NhR9I1/output.txt", 
        "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0NhR9I1/output.txt", 
        "size": 2
    }
}
caused by: failed comparison for key 'outlist': expected: {
    "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592", 
    "class": "File", 
    "location": "output.txt", 
    "size": 20
}
got: {
    "basename": "output.txt", 
    "checksum": "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa", 
    "class": "File", 
    "http://commonwl.org/cwltool#generation": 0, 
    "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0NhR9I1/output.txt", 
    "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0NhR9I1/output.txt", 
    "size": 2
}
caused by: field 'checksum' failed comparison: expected: "sha1$13cda8661796ae241da3a18668fb552161a72592"
got: "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa"
Test [69/87] 
Test [70/87] 
Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0FyLcPB --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0FyLcPB --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0FyLcPB --quiet v1.0/dir4.cwl v1.0/dir4-job.yml
Test directories in secondaryFiles
Compare failure expected: {
    "outlist": {
        "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592", 
        "class": "File", 
        "location": "output.txt", 
        "size": 20
    }
}
got: {
    "outlist": {
        "basename": "output.txt", 
        "checksum": "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa", 
        "class": "File", 
        "http://commonwl.org/cwltool#generation": 0, 
        "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0FyLcPB/output.txt", 
        "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0FyLcPB/output.txt", 
        "size": 2
    }
}
caused by: failed comparison for key 'outlist': expected: {
    "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592", 
    "class": "File", 
    "location": "output.txt", 
    "size": 20
}
got: {
    "basename": "output.txt", 
    "checksum": "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa", 
    "class": "File", 
    "http://commonwl.org/cwltool#generation": 0, 
    "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0FyLcPB/output.txt", 
    "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0FyLcPB/output.txt", 
    "size": 2
}
caused by: field 'checksum' failed comparison: expected: "sha1$13cda8661796ae241da3a18668fb552161a72592"
got: "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa"
Test [71/87] 
Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0pjGOTg --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0pjGOTg --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0pjGOTg --quiet v1.0/dir5.cwl v1.0/dir-job.yml
Test dynamic initial work dir
Compare failure expected: {
    "outlist": {
        "checksum": "sha1$907a866a3e0b7f1fc5a2222531c5fb9063704438", 
        "class": "File", 
        "location": "output.txt", 
        "size": 33
    }
}
got: {
    "outlist": {
        "basename": "output.txt", 
        "checksum": "sha1$96465724a16bca8049228be59635be4d123c9216", 
        "class": "File", 
        "http://commonwl.org/cwltool#generation": 0, 
        "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0pjGOTg/output.txt", 
        "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0pjGOTg/output.txt", 
        "size": 15
    }
}
caused by: failed comparison for key 'outlist': expected: {
    "checksum": "sha1$907a866a3e0b7f1fc5a2222531c5fb9063704438", 
    "class": "File", 
    "location": "output.txt", 
    "size": 33
}
got: {
    "basename": "output.txt", 
    "checksum": "sha1$96465724a16bca8049228be59635be4d123c9216", 
    "class": "File", 
    "http://commonwl.org/cwltool#generation": 0, 
    "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0pjGOTg/output.txt", 
    "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0pjGOTg/output.txt", 
    "size": 15
}
caused by: field 'checksum' failed comparison: expected: "sha1$907a866a3e0b7f1fc5a2222531c5fb9063704438"
got: "sha1$96465724a16bca8049228be59635be4d123c9216"
Test [72/87] 
No JSON object could be decoded

Got workflow error
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/cwltool/main.py", line 243, in single_job_executor
    for r in jobiter:
  File "/usr/local/lib/python2.7/site-packages/cwltool/draft2tool.py", line 396, in job
    if li.get("writable") and j.inplace_update:
AttributeError: 'TESPipelineJob' object has no attribute 'inplace_update'
Workflow error, try again with --debug for more information:
'TESPipelineJob' object has no attribute 'inplace_update'

Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0dfH9MW --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0dfH9MW --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0dfH9MW --quiet v1.0/stagefile.cwl v1.0/stagefile-job.yml
Test writable staged files.
Compare failure expected: {
    "outfile": {
        "checksum": "sha1$b769c7b2e316edd4b5eb2d24799b2c1f9d8c86e6", 
        "class": "File", 
        "location": "bob.txt", 
        "size": 1111
    }
}
got: {}
caused by: failed comparison for key 'outfile': expected: {
    "checksum": "sha1$b769c7b2e316edd4b5eb2d24799b2c1f9d8c86e6", 
    "class": "File", 
    "location": "bob.txt", 
    "size": 1111
}
got: null
Test [73/87] 
No JSON object could be decoded

DIR JOB ----------------------
{'builder': <cwltool.builder.Builder object at 0x103ef94d0>,
 'collect_outputs': <functools.partial object at 0x103fb4aa0>,
 'command_line': [u'cat',
                  u'/private/var/lib/cwl/stg3577eda2-46c3-4eb3-bc31-bbc66a109ce4/bcef0362-b64f-47b9-b404-746bf2a133f4'],
 'docker_workdir': '/var/spool/cwl',
 'environment': {},
 'fs_access': <cwltool.stdfsaccess.StdFsAccess object at 0x103df2f50>,
 'generatefiles': {'basename': '',
                   'class': 'Directory',
                   'listing': [],
                   'location': u'_:60a1e87e-fb59-4697-9041-bc9078fec115'},
 'hints': [ordereddict([('dockerPull', 'debian:wheezy'), ('class', 'DockerRequirement')])],
 'joborder': ordereddict([('file1', ordereddict([('class', 'File'), ('contents', 'Hello file literal'), ('location', u'_:bcef0362-b64f-47b9-b404-746bf2a133f4'), ('basename', u'bcef0362-b64f-47b9-b404-746bf2a133f4'), ('path', u'/private/var/lib/cwl/stg3577eda2-46c3-4eb3-bc31-bbc66a109ce4/bcef0362-b64f-47b9-b404-746bf2a133f4'), ('dirname', u'/private/var/lib/cwl/stg3577eda2-46c3-4eb3-bc31-bbc66a109ce4'), ('nameroot', u'bcef0362-b64f-47b9-b404-746bf2a133f4'), ('nameext', '')]))]),
 'name': u'cat3-tool.cwl',
 'outdir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMRvlOrwm',
 'output_callback': <function output_callback at 0x103e3cb90>,
 'pathmapper': <cwltool.pathmapper.PathMapper object at 0x103e38d10>,
 'permanentFailCodes': None,
 'pipeline': <cwltool_tes.tes.TESPipeline object at 0x103df2f10>,
 'requirements': [],
 'running': True,
 'spec': ordereddict([('class', 'CommandLineTool'), ('cwlVersion', 'v1.0'), ('doc', "Print the contents of a file to stdout using 'cat' running in a docker container."), ('hints', [ordereddict([('dockerPull', 'debian:wheezy'), ('class', 'DockerRequirement')])]), ('inputs', [ordereddict([('type', 'File'), ('label', 'Input File'), ('doc', "The file that will be copied using 'cat'"), ('inputBinding', ordereddict([('position', 1)])), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/cat3-tool.cwl#file1')])]), ('outputs', [ordereddict([('type', 'File'), ('outputBinding', ordereddict([('glob', 'output.txt')])), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/cat3-tool.cwl#output_file')])]), ('baseCommand', 'cat'), ('stdout', 'output.txt'), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/cat3-tool.cwl')]),
 'stagedir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMRDC6eiM',
 'stderr': None,
 'stdin': None,
 'stdout': 'output.txt',
 'successCodes': None,
 'temporaryFailCodes': None,
 'tmpdir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMR5b9tzg'}
CREATED TASK MSG----------------------
{'description': "Print the contents of a file to stdout using 'cat' running in a docker container.",
 'executors': [{'cmd': [u'cat',
                        u'/private/var/lib/cwl/stg3577eda2-46c3-4eb3-bc31-bbc66a109ce4/bcef0362-b64f-47b9-b404-746bf2a133f4'],
                'environ': {},
                'image_name': 'debian:wheezy',
                'stderr': None,
                'stdin': None,
                'stdout': '/var/spool/cwl/output.txt',
                'workdir': '/var/spool/cwl'}],
 'inputs': [{'description': 'cwl_input:file1',
             'name': 'file1',
             'path': u'/private/var/lib/cwl/stg3577eda2-46c3-4eb3-bc31-bbc66a109ce4/bcef0362-b64f-47b9-b404-746bf2a133f4',
             'url': u'_:bcef0362-b64f-47b9-b404-746bf2a133f4'}],
 'name': u'cat3-tool.cwl',
 'outputs': [{'name': 'stdout',
              'path': '/var/spool/cwl/output.txt',
              'url': u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMRvlOrwm/output.txt'},
             {'name': 'workdir',
              'path': '/var/spool/cwl',
              'type': 'DIRECTORY',
              'url': u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMRvlOrwm/'}],
 'resources': {},
 'tags': {'CWLDocumentId': 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/cat3-tool.cwl'}}
SUBMITTED TASK ----------------------
POLLING u'b4iutcruns0vddscig40'
POLLING u'b4iutcruns0vddscig40'
POLLING u'b4iutcruns0vddscig40'
POLLING u'b4iutcruns0vddscig40'
POLLING u'b4iutcruns0vddscig40'
POLLING u'b4iutcruns0vddscig40'
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 801, in __bootstrap_inner
    self.run()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/poll.py", line 37, in run
    self.complete(self.operation)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 314, in complete
    self.callback(operation)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 260, in callback
    raise e
WorkflowException: v1.0/cat3-tool.cwl:15:3: Error collecting output for parameter 'output_file':
v1.0/cat3-tool.cwl:17:21:   Did not find output file with glob pattern: '['output.txt']'

STARTING CLEAN UP ------------------
[job cat3-tool.cwl] Removing input staging directory /Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMRDC6eiM
[job cat3-tool.cwl] Removing temporary directory /Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMR5b9tzg
JOB COMPLETE------------------
Final process status is permanentFail

Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMR --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMR --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.00oxvMR --quiet v1.0/cat3-tool.cwl v1.0/file-literal.yml
Test file literal as input
Compare failure expected: {
    "output_file": {
        "checksum": "sha1$d0e04ff6c413c7d57f9a0ca0a33cd3ab52e2dd9c", 
        "class": "File", 
        "location": "output.txt", 
        "size": 18
    }
}
got: {}
caused by: failed comparison for key 'output_file': expected: {
    "checksum": "sha1$d0e04ff6c413c7d57f9a0ca0a33cd3ab52e2dd9c", 
    "class": "File", 
    "location": "output.txt", 
    "size": 18
}
got: null
Test [74/87] 
Test [75/87] 
Test [76/87] 
Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0x8Q1Gn --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0x8Q1Gn --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0x8Q1Gn --quiet v1.0/dir6.cwl v1.0/dir-job.yml
Test directory input with inputBinding
Compare failure expected: {
    "outlist": {
        "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592", 
        "class": "File", 
        "location": "output.txt", 
        "size": 20
    }
}
got: {
    "outlist": {
        "basename": "output.txt", 
        "checksum": "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa", 
        "class": "File", 
        "http://commonwl.org/cwltool#generation": 0, 
        "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0x8Q1Gn/output.txt", 
        "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0x8Q1Gn/output.txt", 
        "size": 2
    }
}
caused by: failed comparison for key 'outlist': expected: {
    "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592", 
    "class": "File", 
    "location": "output.txt", 
    "size": 20
}
got: {
    "basename": "output.txt", 
    "checksum": "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa", 
    "class": "File", 
    "http://commonwl.org/cwltool#generation": 0, 
    "location": "file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0x8Q1Gn/output.txt", 
    "path": "/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0x8Q1Gn/output.txt", 
    "size": 2
}
caused by: field 'checksum' failed comparison: expected: "sha1$13cda8661796ae241da3a18668fb552161a72592"
got: "sha1$a5d5b61aa8a61b7d9d765e1daf971a9a578f1cfa"
Test [77/87] 
Test [78/87] 
Test [79/87] 
Test [80/87] 
Test [81/87] 
Test [82/87] 
Test [83/87] 
Test [84/87] 
Test [85/87] 
Test [86/87] 
No JSON object could be decoded

DIR JOB ----------------------
{'builder': <cwltool.builder.Builder object at 0x108f19fd0>,
 'collect_outputs': <functools.partial object at 0x108fd2aa0>,
 'command_line': [u'touch', u'/other/thing'],
 'docker_workdir': '/var/spool/cwl',
 'environment': {},
 'fs_access': <cwltool.stdfsaccess.StdFsAccess object at 0x108e13f50>,
 'generatefiles': {'basename': '',
                   'class': 'Directory',
                   'listing': [],
                   'location': u'_:56a993f0-2968-4014-adbf-a5d8007fb80c'},
 'hints': [],
 'joborder': ordereddict([]),
 'name': u'docker-output-dir.cwl',
 'outdir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FORu4Cv2Y',
 'output_callback': <function output_callback at 0x108e5db90>,
 'pathmapper': <cwltool.pathmapper.PathMapper object at 0x108e59f90>,
 'permanentFailCodes': None,
 'pipeline': <cwltool_tes.tes.TESPipeline object at 0x108e13f10>,
 'requirements': [ordereddict([('dockerPull', 'debian:8'), ('dockerOutputDirectory', '/other'), ('class', 'DockerRequirement')])],
 'running': True,
 'spec': ordereddict([('class', 'CommandLineTool'), ('cwlVersion', 'v1.0'), ('requirements', [ordereddict([('dockerPull', 'debian:8'), ('dockerOutputDirectory', '/other'), ('class', 'DockerRequirement')])]), ('inputs', []), ('outputs', [ordereddict([('type', 'File'), ('outputBinding', ordereddict([('glob', 'thing')])), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/docker-output-dir.cwl#thing')])]), ('baseCommand', ['touch', '/other/thing']), ('id', 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/docker-output-dir.cwl')]),
 'stagedir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FORnJg2bR',
 'stderr': None,
 'stdin': None,
 'stdout': None,
 'successCodes': None,
 'temporaryFailCodes': None,
 'tmpdir': u'/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FORsJpiQI'}
CREATED TASK MSG----------------------
{'description': '',
 'executors': [{'cmd': [u'touch', u'/other/thing'],
                'environ': {},
                'image_name': 'debian:8',
                'stderr': None,
                'stdin': None,
                'stdout': None,
                'workdir': '/var/spool/cwl'}],
 'inputs': [],
 'name': u'docker-output-dir.cwl',
 'outputs': [{'name': 'workdir',
              'path': '/var/spool/cwl',
              'type': 'DIRECTORY',
              'url': u'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FORu4Cv2Y/'}],
 'resources': {},
 'tags': {'CWLDocumentId': 'file:///Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.0/v1.0/docker-output-dir.cwl'}}
SUBMITTED TASK ----------------------
POLLING u'b4iuuabuns0vddscig9g'
POLLING u'b4iuuabuns0vddscig9g'
POLLING u'b4iuuabuns0vddscig9g'
POLLING u'b4iuuabuns0vddscig9g'
POLLING u'b4iuuabuns0vddscig9g'
POLLING u'b4iuuabuns0vddscig9g'
POLLING u'b4iuuabuns0vddscig9g'
POLLING u'b4iuuabuns0vddscig9g'
STARTING CLEAN UP ------------------
[job docker-output-dir.cwl] Removing input staging directory /Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FORnJg2bR
[job docker-output-dir.cwl] Removing temporary directory /Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FORsJpiQI
JOB COMPLETE------------------
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/local/Cellar/python/2.7.13/Frameworks/Python.framework/Versions/2.7/lib/python2.7/threading.py", line 801, in __bootstrap_inner
    self.run()
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/poll.py", line 37, in run
    self.complete(self.operation)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 314, in complete
    self.callback(operation)
  File "/Users/strucka/Projects/cwltool/cwltool-tes/cwltool_tes/tes.py", line 260, in callback
    raise e
WorkflowException: v1.0/docker-output-dir.cwl:9:3: Error collecting output for parameter 'thing':
v1.0/docker-output-dir.cwl:12:7:   Did not find output file with glob pattern: '['thing']'
Final process status is permanentFail


Test failed: /Users/strucka/Projects/cwltool/cwltool-tes/cwltool-tes --tmp-outdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FOR --tmpdir-prefix=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FOR --outdir=/Users/strucka/Projects/cwltool/cwltool-tes/common-workflow-language/v1.08q9FOR --quiet v1.0/docker-output-dir.cwl v1.0/empty.json
Test dockerOutputDirectory
Compare failure expected: {
    "thing": {
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709", 
        "class": "File", 
        "location": "thing", 
        "size": 0
    }
}
got: {}
caused by: failed comparison for key 'thing': expected: {
    "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709", 
    "class": "File", 
    "location": "thing", 
    "size": 0
}
got: null
Test [87/87] 
74 tests passed, 13 failures, 0 unsupported features

1 tool tests failed
~/Projects/cwltool/cwltool-tes
