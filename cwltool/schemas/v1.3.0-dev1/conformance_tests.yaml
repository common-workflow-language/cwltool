# every "id" must be unique and have no spaces
# every "doc" must be unique
# "id" and "doc" should be meaningful

- job: tests/bwa-mem-job.json
  tool: tests/bwa-mem-tool.cwl
  output:
    args: [bwa, mem, -t, '2', -I, '1,2,3,4', -m, '3',
      chr20.fa,
      example_human_Illumina.pe_1.fastq,
      example_human_Illumina.pe_2.fastq]
  id: cl_basic_generation
  doc: General test of command line generation
  tags: [ required, command_line_tool ]

- output:
    args: [bwa, mem, chr20.fa,
      "-XXX",
      "-YYY", example_human_Illumina.pe_1.fastq,
      "-YYY", example_human_Illumina.pe_2.fastq]
  job: tests/bwa-mem-job.json
  tool: tests/binding-test.cwl
  id: nested_prefixes_arrays
  doc: Test nested prefixes with arrays
  tags: [ required, command_line_tool ]

- output:
    args: [tmap, mapall, stage1, map1, --min-seq-length, '20', map2, --min-seq-length,
    '20', stage2, map1, --max-seq-length, '20', --min-seq-length, '10', --seed-length,
    '16', map2, --max-seed-hits, '-1', --max-seq-length, '20', --min-seq-length, '10']
  job: tests/tmap-job.json
  tool: tests/tmap-tool.cwl
  id: nested_cl_bindings
  doc: Test nested command line bindings
  tags: [ schema_def, command_line_tool ]

- output:
    args: [cat, hello.txt]
  job: tests/cat-job.json
  tool: tests/cat1-testcli.cwl
  id: cl_optional_inputs_missing
  doc: Test command line with optional input (missing)
  tags: [ required, command_line_tool ]

- output:
    args: [cat, -n, hello.txt]
  job: tests/cat-n-job.json
  tool: tests/cat1-testcli.cwl
  id: cl_optional_bindings_provided
  doc: Test command line with optional input (provided)
  tags: [ required, command_line_tool ]

- output:
    "foo": {
        "checksum": "sha1$63da67422622fbf9251a046d7a34b7ea0fd4fead",
        "class": "File",
        "location": "foo.txt",
        "size": 22
    }
  job: tests/cat-job.json
  tool: tests/template-tool.cwl
  id: initworkdir_expreng_requirements
  doc: Test InitialWorkDirRequirement ExpressionEngineRequirement.engineConfig feature
  tags: [ initial_work_dir, inline_javascript, command_line_tool ]

- job: tests/cat-job.json
  output:
    output_file:
      class: File
      checksum: sha1$47a013e660d408619d894b20806b1d5086aab03b
      location: output.txt
      size: 13
  tool: tests/cat3-tool.cwl
  id: stdout_redirect_docker
  doc: Test command execution in Docker with stdout redirection
  tags: [ docker, command_line_tool ]

- job: tests/cat-job.json
  tool: tests/cat3-tool-shortcut.cwl
  output:
    output_file:
      class: File
      checksum: sha1$47a013e660d408619d894b20806b1d5086aab03b
      location: Any
      size: 13
  id: stdout_redirect_shortcut_docker
  doc: Test command execution in Docker with shortcut stdout redirection
  tags: [ docker, command_line_tool ]

- job: tests/cat-job.json
  output:
    output_file:
      class: File
      checksum: sha1$47a013e660d408619d894b20806b1d5086aab03b
      location: cat-out
      size: 13
  tool: tests/cat3-tool-mediumcut.cwl
  id: stdout_redirect_mediumcut_docker
  doc: Test command execution in Docker with mediumcut stdout redirection
  tags: [ docker, command_line_tool ]

- job: tests/empty.json
  tool: tests/stderr.cwl
  id: stderr_redirect
  doc: Test command line with stderr redirection
  output:
    output_file:
      class: File
      checksum: sha1$f1d2d2f924e986ac86fdf7b36c94bcdf32beec15
      size: 4
      location: error.txt
  tags: [ shell_command, command_line_tool ]

- job: tests/empty.json
  tool: tests/stderr-shortcut.cwl
  id: stderr_redirect_shortcut
  doc: Test command line with stderr redirection, brief syntax
  output:
    output_file:
      class: File
      checksum: sha1$f1d2d2f924e986ac86fdf7b36c94bcdf32beec15
      size: 4
      location: Any
  tags: [ shell_command, command_line_tool ]

- output:
    output_file:
      class: File
      size: 4
      checksum: sha1$f1d2d2f924e986ac86fdf7b36c94bcdf32beec15
      location: std.err
  job: tests/empty.json
  tool: tests/stderr-mediumcut.cwl
  id: stderr_redirect_mediumcut
  doc: Test command line with stderr redirection, named brief syntax
  tags: [ shell_command, command_line_tool ]

- job: tests/cat-job.json
  output:
    output_txt:
      class: File
      checksum: sha1$47a013e660d408619d894b20806b1d5086aab03b
      location: output.txt
      size: 13
  tool: tests/cat4-tool.cwl
  id: stdinout_redirect_docker
  doc: Test command execution in Docker with stdin and stdout redirection
  tags: [ required, command_line_tool ]

- job: tests/empty.json
  tool: tests/null-expression1-tool.cwl
  output:
    output: 1
  id: expression_any
  doc: Test default usage of Any in expressions.
  tags: [ inline_javascript, expression_tool ]

- job: tests/null-expression1-job.json
  tool: tests/null-expression1-tool.cwl
  output:
    output: 1
  id: expression_any_null
  doc: Test explicitly passing null to Any type inputs with default values.
  tags: [ inline_javascript, expression_tool ]

- job: tests/null-expression2-job.json
  tool: tests/null-expression1-tool.cwl
  output:
    output: 2
  id: expression_any_string
  doc: Testing the string 'null' does not trip up an Any with a default value.
  tags: [ inline_javascript, expression_tool ]

- job: tests/empty.json
  tool: tests/null-expression2-tool.cwl
  should_fail: true
  id: expression_any_nodefaultany
  doc: Test Any without defaults cannot be unspecified.
  tags: [ inline_javascript, expression_tool ]

- job: tests/null-expression1-job.json
  tool: tests/null-expression2-tool.cwl
  should_fail: true
  id: expression_any_null_nodefaultany
  doc: Test explicitly passing null to Any type without a default value.
  tags: [ inline_javascript, expression_tool ]

- job: tests/null-expression2-job.json
  tool: tests/null-expression2-tool.cwl
  output:
    output: 2
  id: expression_any_nullstring_nodefaultany
  doc: Testing the string 'null' does not trip up an Any without a default value.
  tags: [ inline_javascript, expression_tool ]

- job: tests/any-type-job.json
  tool: tests/any-type-compat.cwl
  output:
    output1: ["hello", "world"]
    output2: ["foo", "bar"]
    output3: hello
  id: any_outputSource_compatibility
  doc: Testing Any type compatibility in outputSource
  tags: [ required, workflow ]

- job: tests/cat-job.json
  output:
    output:
      checksum: sha1$47a013e660d408619d894b20806b1d5086aab03b
      class: File
      location: output
      size: 13
  tool: tests/cat-tool.cwl
  id: stdinout_redirect
  doc: Test command execution in with stdin and stdout redirection
  tags: [ required, command_line_tool ]

- job: tests/parseInt-job.json
  output: {output: 42}
  tool: tests/parseInt-tool.cwl
  id: expression_parseint
  doc: Test ExpressionTool with Javascript engine
  tags: [ inline_javascript, expression_tool ]

- job: tests/wc-job.json
  output: {output: 16}
  tool: tests/wc2-tool.cwl
  id: expression_outputEval
  doc: Test outputEval to transform output
  tags: [ inline_javascript, command_line_tool ]

- job: tests/wc-job.json
  output: {count_output: 16}
  tool: tests/count-lines1-wf.cwl
  id: wf_wc_parseInt
  doc: Test two step workflow with imported tools
  tags: [ inline_javascript, workflow ]

- job: tests/wc-job.json
  output: {count_output: 16}
  tool: tests/count-lines2-wf.cwl
  id: wf_wc_expressiontool
  doc: Test two step workflow with inline tools
  tags: [ inline_javascript, workflow ]

- job: tests/count-lines3-job.json
  output:
    count_output: [16, 1]
  tool: tests/count-lines3-wf.cwl
  id: wf_wc_scatter
  doc: Test single step workflow with Scatter step
  tags: [ scatter, inline_javascript, workflow ]

- job: tests/count-lines4-job.json
  output:
    count_output: [16, 1]
  tool: tests/count-lines4-wf.cwl
  id: wf_wc_scatter_multiple_merge
  doc: >-
    Test single step workflow with Scatter step and two data links connected to
    same input, default merge behavior
  tags: [ scatter, multiple_input, inline_javascript, workflow ]

- job: tests/count-lines6-job.json
  output:
    count_output: [32, 2]
  tool: tests/count-lines6-wf.cwl
  id: wf_wc_scatter_multiple_nested
  doc: >-
    Test single step workflow with Scatter step and two data links connected to
    same input, nested merge behavior
  tags: [ scatter, multiple_input, inline_javascript, workflow ]

- job: tests/count-lines6-job.json
  output:
    count_output: 34
  tool: tests/count-lines7-wf.cwl
  id: wf_wc_scatter_multiple_flattened
  doc: >-
    Test single step workflow with Scatter step and two data links connected to
    same input, flattened merge behavior
  tags: [ multiple_input, inline_javascript, workflow ]

- job: tests/count-lines4-job.json
  output:
    count_output: 16
  tool: tests/count-lines13-wf.cwl
  id: wf_wc_nomultiple
  doc: >-
    Test when step source is a single-item list and there is no
    linkMerge, then it not wrapped in a list, and that
    MultipleInputFeatureRequirement is not required.
  tags: [ inline_javascript, workflow ]

- job: tests/count-lines4-job.json
  output:
    count_output: 16
  tool: tests/count-lines19-wf.cwl
  id: wf_wc_nomultiple_merge_nested
  doc: >-
    Test when step source is a single-item list and linkMerge is
    listed, then it is wrapped in a list.
  tags: [ inline_javascript, workflow ]

- job: tests/empty.json
  output: {count_output: 1}
  tool: tests/count-lines5-wf.cwl
  id: wf_input_default_missing
  doc: Test workflow with default value for input parameter (missing)
  tags: [ inline_javascript, workflow ]

- job: tests/wc-job.json
  output: {count_output: 16}
  tool: tests/count-lines5-wf.cwl
  id: wf_input_default_provided
  doc: Test workflow with default value for input parameter (provided)
  tags: [ inline_javascript, workflow ]

- job: tests/empty.json
  output: {default_output: workflow_default}
  tool: tests/echo-wf-default.cwl
  id: wf_default_tool_default
  doc: Test that workflow defaults override tool defaults
  tags: [ required, workflow ]

- job: tests/env-job.json
  output:
    out:
      class: File
      checksum: sha1$b3ec4ed1749c207e52b3a6d08c59f31d83bff519
      location: out
      size: 15
  tool: tests/env-tool1.cwl
  id: envvar_req
  doc: Test EnvVarRequirement
  tags: [ env_var, command_line_tool ]

- job: tests/scatter-job1.json
  output:
    out: ["foo one", "foo two", "foo three", "foo four"]
  tool: tests/scatter-wf1.cwl
  id: wf_scatter_single_param
  doc: Test workflow scatter with single scatter parameter
  tags: [ scatter, workflow ]

- job: tests/scatter-job2.json
  output:
    out: [["foo one three", "foo one four"], ["foo two three", "foo two four"]]
  tool: tests/scatter-wf2.cwl
  id: wf_scatter_two_nested_crossproduct
  doc: Test workflow scatter with two scatter parameters and nested_crossproduct join method
  tags: [ scatter, workflow ]

- job: tests/scatter-job2.json
  output:
    out: ["foo one three", "foo one four", "foo two three", "foo two four"]
  tool: "tests/scatter-wf3.cwl#main"
  id: wf_scatter_two_flat_crossproduct
  doc: Test workflow scatter with two scatter parameters and flat_crossproduct join method
  tags: [ scatter, workflow ]

- job: tests/scatter-job2.json
  output:
    out: ["foo one three", "foo two four"]
  tool: "tests/scatter-wf4.cwl#main"
  id: wf_scatter_two_dotproduct
  doc: Test workflow scatter with two scatter parameters and dotproduct join method
  tags: [ scatter, workflow ]

- job: tests/scatter-empty-job1.json
  output:
    out: []
  tool: tests/scatter-wf1.cwl
  id: wf_scatter_emptylist
  doc: Test workflow scatter with single empty list parameter
  tags: [ scatter, workflow ]

- job: tests/scatter-empty-job2.json
  output:
    out: [[], []]
  tool: tests/scatter-wf2.cwl
  id: wf_scatter_nested_crossproduct_secondempty
  doc: Test workflow scatter with two scatter parameters and nested_crossproduct join method with second list empty
  tags: [ scatter, workflow ]

- job: tests/scatter-empty-job3.json
  output:
    out: []
  tool: "tests/scatter-wf3.cwl#main"
  id: wf_scatter_nested_crossproduct_firstempty
  doc: Test workflow scatter with two scatter parameters and nested_crossproduct join method with first list empty
  tags: [ scatter, workflow ]

- job: tests/scatter-empty-job2.json
  output:
    out: []
  tool: "tests/scatter-wf3.cwl#main"
  id: wf_scatter_flat_crossproduct_oneempty
  doc: Test workflow scatter with two scatter parameters, one of which is empty and flat_crossproduct join method
  tags: [ scatter, workflow ]

- job: tests/scatter-empty-job4.json
  output:
    out: []
  tool: "tests/scatter-wf4.cwl#main"
  id: wf_scatter_dotproduct_twoempty
  doc: Test workflow scatter with two empty scatter parameters and dotproduct join method
  tags: [ scatter, workflow ]

- tool: tests/echo-tool.cwl
  job: tests/env-job.json
  output:
    {"out": "hello test env\n"}
  id: any_input_param
  doc: Test Any type input parameter
  tags: [ required, command_line_tool ]

- job: tests/wc-job.json
  output: {count_output: 16}
  tool: tests/count-lines8-wf.cwl
  id: nested_workflow
  doc: Test nested workflow
  tags: [ subworkflow, workflow, inline_javascript ]

- job: tests/env-job.json
  output:
    out:
      class: File
      checksum: sha1$b3ec4ed1749c207e52b3a6d08c59f31d83bff519
      location: out
      size: 15
  tool: tests/env-wf1.cwl
  id: requirement_priority
  doc: Test requirement priority
  tags: [ env_var, workflow ]

- job: tests/env-job.json
  output:
    out:
      class: File
      checksum: sha1$cdc1e84968261d6a7575b5305945471f8be199b6
      location: out
      size: 9
  tool: tests/env-wf2.cwl
  id: requirement_override_hints
  doc: Test requirements override hints
  tags: [ env_var, workflow ]

- job: tests/env-job.json
  output:
    out:
      class: File
      checksum: sha1$cdc1e84968261d6a7575b5305945471f8be199b6
      location: out
      size: 9
  tool: tests/env-wf3.cwl
  id: requirement_workflow_steps
  doc: Test requirements on workflow steps
  tags: [ env_var, workflow ]

- job: tests/empty.json
  output: {count_output: 16}
  tool: tests/count-lines9-wf.cwl
  id: step_input_default_value
  doc: Test default value on step input parameter
  tags: [ inline_javascript, workflow ]

- job: tests/empty.json
  output: {count_output: 16}
  tool: tests/count-lines11-wf.cwl
  id: step_input_default_value_nosource
  doc: Test use default value on step input parameter with empty source
  tags: [ inline_javascript, workflow ]

- job: tests/file1-null.json
  output: {count_output: 16}
  tool: tests/count-lines11-wf.cwl
  id: step_input_default_value_nullsource
  doc: Test use default value on step input parameter with null source
  tags: [ inline_javascript, workflow ]

- job: tests/cat-job.json
  output: {count_output: 1}
  tool: tests/count-lines11-wf.cwl
  id: step_input_default_value_overriden
  doc: Test default value on step input parameter overridden by provided source
  tags: [ inline_javascript, workflow ]

- job: tests/revsort-job.json
  output:
    output:
      class: File
      checksum: sha1$b9214658cc453331b62c2282b772a5c063dbd284
      location: output.txt
      size: 1111
  tool: tests/revsort.cwl
  id: wf_simple
  doc: Test simple workflow
  tags: [ required, workflow ]

- job: tests/cat-job.json
  output:
    output_file:
      class: File
      checksum: sha1$47a013e660d408619d894b20806b1d5086aab03b
      location: output.txt
      size: 13
  tool: tests/cat5-tool.cwl
  id: hints_unknown_ignored
  doc: Test unknown hints are ignored.
  tags: [ required, command_line_tool ]

- job: tests/search-job.json
  output:
    outfile:
      class: File
      checksum: sha1$e2dc9daaef945ac15f01c238ed2f1660f60909a0
      location: result.txt
      size: 142
    indexedfile: {
        "location": "input.txt",
        "class": "File",
        "checksum": "sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376",
        "secondaryFiles": [
            {
                "location": "input.txt.idx1",
                "class": "File",
                "checksum": "sha1$1f6fe811644355974cdd06d9eb695d6e859f3b44",
                "size": 1500
            },
            {
                "location": "input.idx2",
                "class": "File",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "size": 0
            },
            {
                "location": "input.txt.idx3",
                "class": "File",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "size": 0
            },
            {
                "location": "input.txt.idx4",
                "class": "File",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "size": 0
            },
            {
                "location": "input.txt.idx5",
                "class": "File",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "size": 0
            },
            {
                "location": "input.idx6.txt",
                "class": "File",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "size": 0
            },
            {
            "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
            "class": "File",
            "location": "input.txt.idx7",
            "size": 0
            },
            {
            "checksum": "sha1$47a013e660d408619d894b20806b1d5086aab03b",
            "class": "File",
            "location": "hello.txt",
            "size": 13
            },
            {
            "class": "Directory",
            "listing": [{
               "basename": "index",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "class": "File",
                "location": "index",
                "size": 0
            }],
            "location": "input.txt_idx8",
          }
        ],
        "size": 1111
    }
  tool: "tests/search.cwl#main"
  id: initial_workdir_secondary_files_expr
  doc: >-
    Test InitialWorkDirRequirement linking input files and capturing secondaryFiles
    on input and output. Also tests the use of a variety of parameter references
    and expressions in the secondaryFiles field.
  tags: [ initial_work_dir, inline_javascript, workflow ]

- job: tests/rename-job.json
  output:
    outfile:
      class: File
      checksum: sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376
      location: fish.txt
      size: 1111
  tool: tests/rename.cwl
  id: rename
  doc: >-
    Test InitialWorkDirRequirement with expression in filename.
  tags: [ initial_work_dir, command_line_tool ]

- job: tests/string-job.json
  output:
    out:
        class: File
        checksum: sha1$6a47aa22b2a9d13a66a24b3ee5eaed95ce4753cf
        location: example.conf
        size: 16
  tool: tests/iwdr-entry.cwl
  id: initial_workdir_trailingnl
  doc: Test if trailing newline is present in file entry in InitialWorkDir
  tags: [ initial_work_dir, command_line_tool ]

- job: tests/wc-job.json
  output:
    output: 16
  tool: tests/wc4-tool.cwl
  id: inline_expressions
  doc: >-
    Test inline expressions
  tags: [ inline_javascript, command_line_tool ]

- job: tests/schemadef-job.json
  output:
    output:
        location: output.txt
        size: 12
        class: File
        checksum: "sha1$f12e6cfe70f3253f70b0dbde17c692e7fb0f1e5e"
  tool: tests/schemadef-tool.cwl
  id: schemadef_req_tool_param
  doc: >-
    Test SchemaDefRequirement definition used in tool parameter
  tags: [ schema_def, command_line_tool ]

- job: tests/schemadef-job.json
  output:
    output:
        location: output.txt
        size: 12
        class: File
        checksum: "sha1$f12e6cfe70f3253f70b0dbde17c692e7fb0f1e5e"
  tool: tests/schemadef-wf.cwl
  id: schemadef_req_wf_param
  doc: >-
    Test SchemaDefRequirement definition used in workflow parameter
  tags: [ schema_def, workflow ]

- job: tests/empty.json
  output: {
    "t1": {
        "bar": {
            "b az": 2,
            "b\"az": null,
            "b'az": true,
            "baz": "zab1",
            "buz": [
                "a",
                "b",
                "c"
            ]
        }
    },
    "t10": true,
    "t11": true,
    "t12": null,
    "t13": "-zab1",
    "t14": "-zab1",
    "t15": "-zab1",
    "t16": "-zab1",
    "t17": "zab1 zab1",
    "t18": "zab1 zab1",
    "t19": "zab1 zab1",
    "t2": {
        "b az": 2,
        "b\"az": null,
        "b'az": true,
        "baz": "zab1",
        "buz": [
            "a",
            "b",
            "c"
        ]
    },
    "t20": "zab1 zab1",
    "t21": "2 2",
    "t22": "true true",
    "t23": "true true",
    "t24": "null null",
    "t25": "b",
    "t26": "b b",
    "t3": {
        "b az": 2,
        "b\"az": null,
        "b'az": true,
        "baz": "zab1",
        "buz": [
            "a",
            "b",
            "c"
        ]
    },
    "t4": {
        "b az": 2,
        "b\"az": null,
        "b'az": true,
        "baz": "zab1",
        "buz": [
            "a",
            "b",
            "c"
        ]
    },
    "t5": "zab1",
    "t6": "zab1",
    "t7": "zab1",
    "t8": "zab1",
    "t9": 2,
    "t27": null,
    "t28": 3
    }
  tool: tests/params.cwl
  id: param_evaluation_noexpr
  doc: Test parameter evaluation, no support for JS expressions
  tags: [ required, command_line_tool ]

- job: tests/empty.json
  output: {
    "t1": {
        "bar": {
            "b az": 2,
            "b\"az": null,
            "b'az": true,
            "baz": "zab1",
            "buz": [
                "a",
                "b",
                "c"
            ]
        }
    },
    "t10": true,
    "t11": true,
    "t12": null,
    "t13": "-zab1",
    "t14": "-zab1",
    "t15": "-zab1",
    "t16": "-zab1",
    "t17": "zab1 zab1",
    "t18": "zab1 zab1",
    "t19": "zab1 zab1",
    "t2": {
        "b az": 2,
        "b\"az": null,
        "b'az": true,
        "baz": "zab1",
        "buz": [
            "a",
            "b",
            "c"
        ]
    },
    "t20": "zab1 zab1",
    "t21": "2 2",
    "t22": "true true",
    "t23": "true true",
    "t24": "null null",
    "t25": "b",
    "t26": "b b",
    "t3": {
        "b az": 2,
        "b\"az": null,
        "b'az": true,
        "baz": "zab1",
        "buz": [
            "a",
            "b",
            "c"
        ]
    },
    "t4": {
        "b az": 2,
        "b\"az": null,
        "b'az": true,
        "baz": "zab1",
        "buz": [
            "a",
            "b",
            "c"
        ]
    },
    "t5": "zab1",
    "t6": "zab1",
    "t7": "zab1",
    "t8": "zab1",
    "t9": 2,
    "t27": null,
    "t28": 3
    }
  tool: tests/params2.cwl
  id: param_evaluation_expr
  doc: >-
    Test parameter evaluation, with support for JS expressions
  tags: [ inline_javascript, command_line_tool ]

- output: {}
  job: tests/cat-job.json
  tool: tests/metadata.cwl
  id: metadata
  doc: Test metadata
  tags: [ required, command_line_tool ]

- job: tests/formattest-job.json
  output:
    output:
        "location": "output.txt"
        "format": "http://edamontology.org/format_2330"
        "size": 1111
        "class": "File"
        "checksum": "sha1$97fe1b50b4582cebc7d853796ebd62e3e163aa3f"
  tool: tests/formattest.cwl
  id: format_checking
  doc: >-
    Test simple format checking.
  tags: [ required, command_line_tool ]

- job: tests/formattest2-job.json
  output:
    output:
        "location": "output.txt"
        "format": "http://edamontology.org/format_1929"
        "size": 12010
        "class": "File"
        "checksum": "sha1$971d88faeda85a796752ecf752b7e2e34f1337ce"
  tool: tests/formattest2.cwl
  id: format_checking_subclass
  doc: >-
    Test format checking against ontology using subclassOf.
  tags: [ required, command_line_tool ]

- job: tests/formattest2-job.json
  output:
    output:
        "location": "output.txt"
        "format": "http://edamontology.org/format_1929"
        "size": 12010
        "class": "File"
        "checksum": "sha1$971d88faeda85a796752ecf752b7e2e34f1337ce"
  tool: tests/formattest3.cwl
  id: format_checking_equivalentclass
  doc: >-
    Test format checking against ontology using equivalentClass.
  tags: [ required, command_line_tool ]

- tool: tests/optional-output.cwl
  job: tests/cat-job.json
  output:
    optional_file: null
    output_file:
        location: output.txt
        size: 13
        class: "File"
        checksum: "sha1$47a013e660d408619d894b20806b1d5086aab03b"
  id: output_secondaryfile_optional
  doc: >-
    Test optional output file and optional secondaryFile on output.
  tags: [ docker, command_line_tool ]

- job: tests/empty.json
  output:
    out: "\n"
  tool: tests/vf-concat.cwl
  id: valuefrom_ignored_null
  doc: Test that valueFrom is ignored when the parameter is null
  tags: [ inline_javascript, command_line_tool ]

- job: tests/cat-job.json
  output:
    out: "a string\n"
  tool: tests/vf-concat.cwl
  id: valuefrom_secondexpr_ignored
  doc: Test that second expression in concatenated valueFrom is not ignored
  tags: [ inline_javascript, command_line_tool ]

- job: tests/step-valuefrom-wf.json
  output: {count_output: 16}
  tool: tests/step-valuefrom-wf.cwl
  id: valuefrom_wf_step
  doc: Test valueFrom on workflow step.
  tags: [ step_input, inline_javascript, workflow ]

- job: tests/step-valuefrom-job.json
  output: {val: "3\n"}
  tool: tests/step-valuefrom2-wf.cwl
  id: valuefrom_wf_step_multiple
  doc: Test valueFrom on workflow step with multiple sources
  tags: [ step_input, inline_javascript, multiple_input, workflow ]

- job: tests/step-valuefrom-job.json
  output: {val: "3\n"}
  tool: tests/step-valuefrom3-wf.cwl
  id: valuefrom_wf_step_other
  doc: Test valueFrom on workflow step referencing other inputs
  tags: [ step_input, inline_javascript, workflow ]

- job: tests/record-output-job.json
  output:
    "orec": {
        "ofoo": {
            "location": "foo",
            "size": 1111,
            "class": "File",
            "checksum": "sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376"
        },
        "obar": {
            "location": "bar",
            "size": 12010,
            "class": "File",
            "checksum": "sha1$aeb3d11bdf536511649129f4077d5cda6a324118"
        }
    }
  tool: tests/record-output.cwl
  id: record_output_binding
  doc: Test record type output binding.
  tags: [ shell_command, command_line_tool ]

- job: tests/empty.json
  output: {
    "foo": {
        "location": "foo",
        "class": "File",
        "checksum": "sha1$f1d2d2f924e986ac86fdf7b36c94bcdf32beec15",
        "size": 4
    }
  }
  tool: tests/test-cwl-out.cwl
  id: docker_json_output_path
  doc: >-
    Test support for reading cwl.output.json when running in a Docker container
    and just 'path' is provided.
  tags: [ shell_command, command_line_tool ]

- job: tests/empty.json
  output: {
    "foo": {
        "location": "foo",
        "class": "File",
        "checksum": "sha1$f1d2d2f924e986ac86fdf7b36c94bcdf32beec15",
        "size": 4
    }
  }
  tool: tests/test-cwl-out2.cwl
  id: docker_json_output_location
  doc: >-
    Test support for reading cwl.output.json when running in a Docker container
    and just 'location' is provided.
  tags: [ shell_command, command_line_tool ]

- job: tests/empty.json
  output: {
    "foo": {
        "location": "foo",
        "class": "File",
        "checksum": "sha1$f1d2d2f924e986ac86fdf7b36c94bcdf32beec15",
        "size": 4
    }
  }
  tool: tests/test-cwl-out3.cwl
  id: json_output_path_relative
  doc: >-
    Test support for reading cwl.output.json where 'path' is relative path in output dir.
  tags: [ required, command_line_tool ]

- job: tests/empty.json
  output: {
    "foo": {
        "location": "foo",
        "class": "File",
        "checksum": "sha1$f1d2d2f924e986ac86fdf7b36c94bcdf32beec15",
        "size": 4
    }
  }
  tool: tests/test-cwl-out4.cwl
  id: json_output_location_relative
  doc: >-
    Test support for reading cwl.output.json where 'location' is relative reference to output dir.
  tags: [ required, command_line_tool ]

- job: tests/abc.json
  output:
    files: [{
        "location": "a",
        "size": 0,
        "class": "File",
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709"
    },
    {
        "location": "b",
        "size": 0,
        "class": "File",
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709"
    },
    {
        "location": "c",
        "size": 0,
        "class": "File",
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709"
    }]
  tool: tests/glob-expr-list.cwl
  id: multiple_glob_expr_list
  doc: Test support for returning multiple glob patterns from expression
  tags: [ required, command_line_tool ]

- job: tests/scatter-valuefrom-job1.json
  output:
    out: ["foo one one", "foo one two", "foo one three", "foo one four"]
  tool: tests/scatter-valuefrom-wf1.cwl
  id: wf_scatter_oneparam_valuefrom
  doc: Test workflow scatter with single scatter parameter and two valueFrom on step input (first and current el)
  tags: [ scatter, step_input, workflow ]

- job: tests/scatter-valuefrom-job2.json
  output:
    out: [["foo one one three", "foo one one four"], ["foo one two three", "foo one two four"]]
  tool: tests/scatter-valuefrom-wf2.cwl
  id: wf_scatter_twoparam_nested_crossproduct_valuefrom
  doc: Test workflow scatter with two scatter parameters and nested_crossproduct join method and valueFrom on step input
  tags: [ scatter, step_input, workflow ]

- job: tests/scatter-valuefrom-job2.json
  output:
    out: ["foo one one three", "foo one one four", "foo one two three", "foo one two four"]
  tool: "tests/scatter-valuefrom-wf3.cwl#main"
  id: wf_scatter_twoparam_flat_crossproduct_valuefrom
  doc: Test workflow scatter with two scatter parameters and flat_crossproduct join method and valueFrom on step input
  tags: [ scatter, step_input, workflow ]

- job: tests/scatter-valuefrom-job2.json
  output:
    out: ["foo one one three", "foo one two four"]
  tool: "tests/scatter-valuefrom-wf4.cwl#main"
  id: wf_scatter_twoparam_dotproduct_valuefrom
  doc: Test workflow scatter with two scatter parameters and dotproduct join method and valueFrom on step input
  tags: [ scatter, step_input, workflow ]

- job: tests/scatter-valuefrom-job1.json
  output:
    out: ["foo one one", "foo two two", "foo three three", "foo four four"]
  tool: tests/scatter-valuefrom-wf5.cwl
  id: wf_scatter_oneparam_valuefrom_twice_current_el
  doc: Test workflow scatter with single scatter parameter and two valueFrom on step input (current el twice)
  tags: [ scatter, step_input, workflow ]

- job: tests/scatter-valuefrom-job3.json
  tool: tests/scatter-valuefrom-wf6.cwl
  id: wf_scatter_oneparam_valueFrom
  doc: Test valueFrom eval on scattered input parameter
  output:
    out_message: [
        {
            "checksum": "sha1$98030575f6fc40e5021be5a8803a6bef94aee11f",
            "location": Any,
            "class": "File",
            "size": 16
        },
        {
            "checksum": "sha1$edcacd50778d98ae113015406b3195c165059dd8",
            "location": Any,
            "class": "File",
            "size": 16
        }
    ]
  tags: [ scatter, step_input, workflow ]

- job: tests/conflict-job.json
  output: {
    "fileout": {
        "location": "out.txt",
        "checksum": "sha1$a2d8d6e7b28295dc9977dc3bdb652ddd480995f0",
        "class": "File",
        "size": 25
    }
  }
  tool: "tests/conflict-wf.cwl#collision"
  id: wf_two_inputfiles_namecollision
  doc: Test workflow two input files with same name.
  tags: [ required, workflow ]

- job: tests/dir-job.yml
  output:
    "outlist": {
        "size": 20,
        "location": "output.txt",
        "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592",
        "class": "File"
    }
  tool: tests/dir.cwl
  id: directory_input_param_ref
  doc: Test directory input with parameter reference
  tags: [ shell_command, command_line_tool ]

- job: tests/dir-job.yml
  output:
    "outlist": {
        "size": 20,
        "location": "output.txt",
        "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592",
        "class": "File"
    }
  tool: tests/dir2.cwl
  id: directory_input_docker
  doc: Test directory input in Docker
  tags: [ command_line_tool, shell_command ]

- job: tests/dir3-job.yml
  output:
    "outdir": {
        "class": "Directory",
        "listing": [
            {
              "class": "File",
              "location": "goodbye.txt",
                "checksum": "sha1$dd0a4c4c49ba43004d6611771972b6cf969c1c01",
                "size": 24
            },
            {
              "class": "File",
              "location": "hello.txt",
                "checksum": "sha1$47a013e660d408619d894b20806b1d5086aab03b",
                "size": 13
            }
        ],
    }
  tool: tests/dir3.cwl
  id: directory_output
  doc: Test directory output
  tags: [ required, command_line_tool ]

- job: tests/dir4-job.yml
  output: {
    "outlist": {
      "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592",
      "size": 20,
      "location": "output.txt",
      "class": "File"
    }
  }
  tool: tests/dir4.cwl
  id: directory_secondaryfiles
  doc: Test directories in secondaryFiles
  tags: [ shell_command, command_line_tool ]

- job: tests/dir-job.yml
  output: {
    "outlist": {
        "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592",
        "size": 20,
        "location": "output.txt",
        "class": "File"
    }
  }
  tool: tests/dir5.cwl
  id: dynamic_initial_workdir
  doc: Test dynamic initial work dir
  tags: [ shell_command, initial_work_dir, command_line_tool ]

- job: tests/stagefile-job.yml
  output: {
    "outfile": {
        "checksum": "sha1$b769c7b2e316edd4b5eb2d24799b2c1f9d8c86e6",
        "size": 1111,
        "location": "bob.txt",
        "class": "File"
    }
  }
  tool: tests/stagefile.cwl
  id: writable_stagedfiles
  doc: Test writable staged files.
  tags: [ initial_work_dir, command_line_tool ]

- job: tests/file-literal.yml
  output:
    output_file:
      class: File
      checksum: sha1$d0e04ff6c413c7d57f9a0ca0a33cd3ab52e2dd9c
      location: output.txt
      size: 18
  tool: tests/cat3-tool.cwl
  id: input_file_literal
  doc: Test file literal as input
  tags: [ required, command_line_tool ]

- job: tests/arguments-job.yml
  output:
    classfile:
        checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        location: Hello.class
        class: File
        size: 0
  tool: tests/linkfile.cwl
  id: initial_workdir_expr
  doc: Test expression in InitialWorkDir listing
  tags: [ initial_work_dir, command_line_tool ]

- job: tests/wc-job.json
  output:
    b:
        checksum: sha1$c4cfd130e7578714e3eef91c1d6d90e0e0b9db3e
        location: whale.xtx
        class: File
        size: 21
  tool: tests/nameroot.cwl
  id: nameroot_nameext_stdout_expr
  doc: Test nameroot/nameext expression in arguments, stdout
  tags: [ required, command_line_tool ]

- job: tests/dir-job.yml
  output:
    "outlist": {
        "size": 20,
        "location": "output.txt",
        "checksum": "sha1$13cda8661796ae241da3a18668fb552161a72592",
        "class": "File"
    }
  tool: tests/dir6.cwl
  id: input_dir_inputbinding
  doc: Test directory input with inputBinding
  tags: [ shell_command, command_line_tool ]

- job: tests/nested-array-job.yml
  output:
    echo:
        checksum: sha1$3f786850e387550fdab836ed7e6dc881de23001b
        location: echo.txt
        class: File
        size: 2
  tool: tests/nested-array.cwl
  id: cl_gen_arrayofarrays
  doc: Test command line generation of array-of-arrays
  tags: [ required, command_line_tool ]

- job: tests/empty.json
  output: {}
  tool: tests/envvar.cwl
  id: env_home_tmpdir
  doc: Test $HOME and $TMPDIR are set correctly
  tags: [ shell_command, command_line_tool ]

- job: tests/empty.json
  output: {}
  tool: tests/envvar2.cwl
  id: env_home_tmpdir_docker
  doc: Test $HOME and $TMPDIR are set correctly in Docker
  tags: [ shell_command, command_line_tool ]

- job: tests/empty.json
  output:
    "out": {
        "checksum": "sha1$7448d8798a4380162d4b56f9b452e2f6f9e24e7a",
        "location": "whatever.txt",
        "class": "File",
        "size": 2
    }
  tool: "tests/js-expr-req-wf.cwl#wf"
  id: expressionlib_tool_wf_override
  doc: Test that expressionLib requirement of individual tool step overrides expressionLib of workflow.
  tags: [ inline_javascript, workflow ]

- job: tests/initialworkdirrequirement-docker-out-job.json
  output:
    OUTPUT:
      "checksum": "sha1$aeb3d11bdf536511649129f4077d5cda6a324118"
      "location": "ref.fasta"
      "secondaryFiles": [{
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "location": "ref.fasta.fai",
          "class": "File",
          "size": 0
      }]
      "class": "File"
      "size": 12010
  tool: tests/initialworkdirrequirement-docker-out.cwl
  id: initial_workdir_output
  doc: Test output of InitialWorkDir
  tags: [ docker, initial_work_dir, command_line_tool ]

- job: tests/wc-job.json
  output: {count_output: 16}
  tool: tests/count-lines10-wf.cwl
  id: embedded_subworkflow
  doc: Test embedded subworkflow
  tags: [ subworkflow, workflow ]

- job: tests/docker-array-secondaryfiles-job.json
  output: {
    "bai_list": {
        "checksum": "sha1$081fc0e57d6efa5f75eeb237aab1d04031132be6",
        "location": "fai.list",
        "class": "File",
        "size": 386
    }
  }
  tool: tests/docker-array-secondaryfiles.cwl
  id: filesarray_secondaryfiles
  doc: Test required, optional and null secondaryFiles on array of files.
  tags: [ docker, inline_javascript, shell_command, command_line_tool ]

- job: tests/docker-array-secondaryfiles-job2.json
  should_fail: true
  tool: tests/docker-array-secondaryfiles.cwl
  id: filesarray_secondaryfiles2
  doc: Test required, optional and null secondaryFiles on array of files.
  tags: [ docker, inline_javascript, shell_command, command_line_tool ]

- job: tests/dir7.yml
  output: {
    "dir": {
        "location": "a_directory",
        "class": "Directory",
        "listing": [
            {
                "class": "File",
                "location": "whale.txt",
                "checksum": "sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376",
                "size": 1111
            },
            {
                "class": "File",
                "location": "hello.txt",
                "checksum": "sha1$47a013e660d408619d894b20806b1d5086aab03b",
                "size": 13
            }
        ]
    }
  }
  tool: tests/dir7.cwl
  id: exprtool_directory_literal
  doc: Test directory literal output created by ExpressionTool
  tags: [ inline_javascript, expression_tool ]

- job: tests/empty.json
  output:
    lit:
      location: "a_file"
      class: "File"
      checksum: "sha1$fea23663b9c8ed71968f86415b5ec091bb111448"
      size: 19
  tool: tests/file-literal-ex.cwl
  id: exprtool_file_literal
  doc: Test file literal output created by ExpressionTool
  tags: [ inline_javascript, expression_tool ]

- job: tests/empty.json
  output:
    "thing": {
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "location": "thing",
        "class": "File",
        "size": 0
    }
  tool: tests/docker-output-dir.cwl
  id: dockeroutputdir
  doc: Test dockerOutputDirectory
  tags: [ docker, command_line_tool ]

- job: tests/empty.json
  output:
    out:
      class: File
      checksum: sha1$b3ec4ed1749c207e52b3a6d08c59f31d83bff519
      location: out
      size: 15
  tool: tests/imported-hint.cwl
  id: hints_import
  doc: Test hints with $import
  tags: [ required, command_line_tool ]

- output: {}
  job: tests/default_path_job.yml
  tool: tests/default_path.cwl
  id: default_path_notfound_warning
  doc: Test warning instead of error when default path is not found
  tags: [ required, command_line_tool ]

- output:
    args: [-A,'2',-B,baz,-C,'10','9','8','7','6','5','4','3','2','1',-D]
  job: tests/empty.json
  tool: tests/inline-js.cwl
  id: inlinejs_req_expressions
  doc: Test InlineJavascriptRequirement with multiple expressions in the same tool
  tags: [ inline_javascript, command_line_tool ]

- job: tests/recursive-input-directory.yml
  output:
    output_dir: {
        "basename": "work_dir",
        "class": "Directory",
        "listing": [
            {
                "basename": "a",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "class": "File",
                "location": "work_dir/a",
                "size": 0
            },
            {
                "basename": "b",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "class": "File",
                "location": "work_dir/b",
                "size": 0
            },
            {
                "basename": "c",
                "class": "Directory",
                "listing": [
                    {
                        "basename": "d",
                        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                        "class": "File",
                        "location": "work_dir/c/d",
                        "size": 0
                    }
                ],
                "location": "work_dir/c",
            },
            {
                "basename": "e",
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "class": "File",
                "location": "work_dir/e",
                "size": 0
            },
        ],
        "location": "work_dir",
      }
    test_result: {
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "class": "File",
        "location": "output.txt",
        "size": 0
      }
  tool: tests/recursive-input-directory.cwl
  id: input_dir_recurs_copy_writable
  doc: Test if a writable input directory is recursively copied and writable
  tags: [ initial_work_dir, shell_command, command_line_tool ]

- output:
    out: "t\n"
  job: tests/empty.json
  tool: tests/null-defined.cwl
  id: null_missing_params
  doc: Test that missing parameters are null (not undefined) in expression
  tags: [ inline_javascript, command_line_tool ]

- output:
    out: "f\n"
  job: tests/cat-job.json
  tool: tests/null-defined.cwl
  id: param_notnull_expr
  doc: Test that provided parameter is not null in expression
  tags: [ inline_javascript, command_line_tool ]

- job: tests/revsort-job.json
  output:
    output:
      class: File
      checksum: sha1$b9214658cc453331b62c2282b772a5c063dbd284
      location: output.txt
      size: 1111
  tool: tests/revsort-packed.cwl#main
  id: wf_compound_doc
  doc: Test compound workflow document
  tags: [ required, workflow ]

- job: tests/basename-fields-job.yml
  output:
    extFile:
      checksum: sha1$301a72c82a835e1737caf30f94d0eec210c4d9f1
      class: File
      size: 5
      location: Any
      path: Any
    rootFile:
      checksum: sha1$b4a583c391e234cf210e1d576f68f674c8ad7ecd
      class: File
      size: 10
      location: Any
      path: Any
  tool: tests/basename-fields-test.cwl
  id: nameroot_nameext_generated
  doc: Test that nameroot and nameext are generated from basename at execution time by the runner
  tags: [ step_input, workflow ]

- job: tests/wc-job.json
  output: {}
  tool: tests/initialwork-path.cwl
  id: initialworkpath_output
  doc: Test that file path in $(inputs) for initialworkdir is in $(outdir).
  tags: [ initial_work_dir, command_line_tool ]

- job: tests/count-lines6-job.json
  output:
    count_output: 34
  tool: tests/count-lines12-wf.cwl
  id: wf_scatter_twopar_oneinput_flattenedmerge
  doc: >-
    Test single step workflow with Scatter step and two data links connected to
    same input, flattened merge behavior. Workflow inputs are set as list
  tags: [ multiple_input, inline_javascript, workflow ]

- job: tests/sum-job.json
  output:
    result: 12
  tool: tests/sum-wf.cwl
  id: wf_multiplesources_multipletypes
  doc: Test step input with multiple sources with multiple types
  tags: [ step_input, inline_javascript, multiple_input, workflow ]

- job: tests/empty.json
  output: {
    "stderr_file": {
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "location": Any,
        "class": "File",
        "size": 0
    },
    "stdout_file": {
        "checksum": "sha1$1555252d52d4ec3262538a4426a83a99cfff4402",
        "location": Any,
        "class": "File",
        "size": 9
    }
  }
  tool: tests/shellchar.cwl
  id: shelldir_notinterpreted
  doc: "Test that shell directives are not interpreted."
  tags: [ required, command_line_tool ]

- job: tests/empty.json
  output: {
    "stderr_file": {
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "location": Any,
        "class": "File",
        "size": 0
    },
    "stdout_file": {
        "checksum": "sha1$1555252d52d4ec3262538a4426a83a99cfff4402",
        "location": Any,
        "class": "File",
        "size": 9
    }
  }
  tool: tests/shellchar2.cwl
  id: shelldir_quoted
  doc: "Test that shell directives are quoted."
  tags: [ shell_command, command_line_tool ]

- job: tests/empty.json
  output:
    out: {
        "basename": "emptyWritableDir",
        "listing": [
            {
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "basename": "blurg",
                "location": "blurg",
                "class": "File",
                "size": 0
            }
        ],
        "location": "emptyWritableDir",
        "class": "Directory"
    }
  tool: tests/writable-dir.cwl
  id: initial_workdir_empty_writable
  doc: Test empty writable dir with InitialWorkDirRequirement
  tags: [ inline_javascript, initial_work_dir, command_line_tool ]

- job: tests/empty.json
  output:
    out: {
        "basename": "emptyWritableDir",
        "listing": [
            {
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "basename": "blurg",
                "location": "blurg",
                "class": "File",
                "size": 0
            }
        ],
        "location": "emptyWritableDir",
        "class": "Directory"
    }
  tool: tests/writable-dir-docker.cwl
  id: initial_workdir_empty_writable_docker
  doc: Test empty writable dir with InitialWorkDirRequirement inside Docker
  tags: [ inline_javascript, initial_work_dir, command_line_tool ]

- job: tests/dynresreq-job.yaml
  tool: tests/dynresreq.cwl
  id: dynamic_resreq_inputs
  doc: Test dynamic resource reqs referencing inputs
  output:
     output: {
        "location": "cores.txt",
        "size": 2,
        "class": "File",
        "checksum": "sha1$7448d8798a4380162d4b56f9b452e2f6f9e24e7a"
     }
  tags: [ resource, command_line_tool ]

- job: tests/file-literal.yml
  output:
    output_file:
      class: File
      checksum: sha1$d0e04ff6c413c7d57f9a0ca0a33cd3ab52e2dd9c
      location: output.txt
      size: 18
  tool: tests/cat3-nodocker.cwl
  id: fileliteral_input_docker
  doc: Test file literal as input without Docker
  tags: [ required, command_line_tool ]

- doc: Test that OutputBinding.glob is sorted as specified by POSIX
  job: tests/empty.json
  id: outputbinding_glob_sorted
  tool: tests/glob_test.cwl
  output:
    letters:
      - checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        location: a
        class: File
        size: 0
      - checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        location: b
        class: File
        size: 0
      - checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        location: c
        class: File
        size: 0
      - checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        location: w
        class: File
        size: 0
      - checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        location: x
        class: File
        size: 0
      - checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        location: y
        class: File
        size: 0
      - checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        location: z
        class: File
        size: 0
  tags: [ required, command_line_tool ]

- doc: Test InitialWorkDirRequirement with a nested directory structure from another step
  job: tests/empty.json
  output:
    ya_empty:
      class: File
      checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
      location: ya
      size: 0
  tool: tests/iwdr_with_nested_dirs.cwl
  id: initialworkdir_nesteddir
  tags: [ initial_work_dir, workflow ]

- job: tests/bool-empty-inputbinding-job.json
  output: {
    "args": [
    ]
  }
  tool: tests/bool-empty-inputbinding.cwl
  id: booleanflags_cl_noinputbinding
  doc: "Test that boolean flags do not appear on command line if inputBinding is empty and not null"
  tags: [ required, command_line_tool ]

- job: tests/empty.json
  output: {
    "args": []
  }
  tool: tests/stage-unprovided-file.cwl
  id: expr_reference_self_noinput
  doc: Test that expression engine does not fail to evaluate reference to self
       with unprovided input
  tags: [ required, command_line_tool ]

- tool: tests/exit-success.cwl
  id: success_codes
  doc: Test successCodes
  job: tests/empty.json
  output: {}
  tags: [ required, command_line_tool ]

- job: tests/dynresreq-job.yaml
  doc: Test simple workflow with a dynamic resource requirement
  tool: tests/dynresreq-workflow.cwl
  id: dynamic_resreq_wf
  output:
     cores: {
        "location": "output",
        "size": 2,
        "class": "File",
        "checksum": "sha1$7448d8798a4380162d4b56f9b452e2f6f9e24e7a"
     }
  tags: [ resource, workflow ]

- job: tests/empty-array-job.json
  output: {
    "args": []
  }
  tool: tests/empty-array-input.cwl
  id: cl_empty_array_input
  doc: "Test that empty array input does not add anything to command line"
  tags: [ required, command_line_tool ]

- job: tests/empty.json
  tool: tests/steplevel-resreq.cwl
  id: resreq_step_overrides_wf
  doc: Test that ResourceRequirement on a step level redefines requirement on the workflow level
  output:
     out: {
        "location": "cores.txt",
        "size": 2,
        "class": "File",
        "checksum": "sha1$e5fa44f2b31c1fb553b6021e7360d07d5d91ff5e"
     }
  tags: [ resource, workflow ]

- job: tests/array-of-strings-job.yml
  output: {
    "args": ["replacementValue"]
  }
  tool: tests/valueFrom-constant.cwl
  id: valuefrom_constant_overrides_inputs
  doc: Test valueFrom with constant value overriding provided array inputs
  tags: [ required, command_line_tool ]

- job: tests/dynresreq-dir-job.yaml
  tool: tests/dynresreq-dir.cwl
  id: dynamic_resreq_filesizes
  doc: Test dynamic resource reqs referencing the size of Files inside a Directory
  output:
     output: {
        "location": "cores.txt",
        "size": 2,
        "class": "File",
        "checksum": "sha1$7448d8798a4380162d4b56f9b452e2f6f9e24e7a"
     }
  tags: [ resource, command_line_tool ]

- job: tests/empty.json
  tool: tests/pass-unconnected.cwl
  id: wf_step_connect_undeclared_param
  doc: >-
    Test that it is not an error to connect a parameter to a workflow
    step, even if the parameter doesn't appear in the `run` process
    inputs.
  output: { "out": "hello inp1\n" }
  tags: [ required, workflow ]

- job: tests/empty.json
  tool: tests/fail-unconnected.cwl
  id: wf_step_access_undeclared_param
  doc: >-
    Test that parameters that don't appear in the `run` process
    inputs are not present in the input object used to run the tool.
  should_fail: true
  tags: [ required, workflow ]

- job: tests/empty.json
  output:
    results:
       basename: results
       class: File
       checksum: "sha1$7d5ca8c0c03e883c56c4eb1ef6f6bb9bccad4d86"
       size: 8
  tool: tests/envvar3.cwl
  id: env_home_tmpdir_docker_no_return_code
  doc: Test $HOME and $TMPDIR are set correctly in Docker without using return code
  tags: [ shell_command, command_line_tool ]

- job: tests/scatter-valuefrom-job1.json
  output:
    out: ["foo one one", "foo one two", "foo one three", "foo one four"]
  tool: tests/scatter-valuefrom-inputs-wf1.cwl
  id: wf_scatter_oneparam_valuefrom_inputs
  doc: Test workflow scatter with single scatter parameter and two valueFrom using $inputs (first and current el)
  tags: [ scatter, step_input, workflow ]

- job: tests/import_schema-def_job.yml
  output:
    output_bam:
      checksum: "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709"
      basename: a.bam
      class: File
      size: 0
  tool: tests/import_schema-def_packed.cwl
  id: packed_import_schema
  doc: SchemaDefRequirement with $import, and packed
  tags: [ schema_def, workflow ]

- job: tests/dir4-subdir-1-job.yml
  output: {
    "outlist": {
      "checksum": "sha1$9d9bc8f5252d39274b5dfbac64216c6e888f5dfc",
      "size": 14,
      "location": "output.txt",
      "class": "File"
    }
  }
  tool: tests/dir4.cwl
  id: job_input_secondary_subdirs
  doc: Test specifying secondaryFiles in subdirectories of the job input document.
  tags: [ shell_command, command_line_tool ]

- job: tests/dir4-subdir-2-job.yml
  output: {
    "outlist": {
      "checksum": "sha1$9d9bc8f5252d39274b5dfbac64216c6e888f5dfc",
      "size": 14,
      "location": "output.txt",
      "class": "File"
    }
  }
  tool: tests/dir4.cwl
  id: job_input_subdir_primary_and_secondary_subdirs
  doc: Test specifying secondaryFiles in same subdirectory of the job input as the primary input file.
  tags: [ shell_command, command_line_tool ]

- job: tests/count-lines3-job.json
  output:
    count_output: [16, 1]
  tool: tests/count-lines18-wf.cwl
  id: scatter_embedded_subworkflow
  doc: Test simple scatter over an embedded subworkflow
  tags: [ workflow, inline_javascript ]

- job: tests/count-lines4-job.json
  output:
    count_output: [16, 1]
  tool: tests/count-lines14-wf.cwl
  id: scatter_multi_input_embedded_subworkflow
  doc: Test simple multiple input scatter over an embedded subworkflow
  tags: [ workflow, scatter, subworkflow, multiple_input, inline_javascript ]

- job: tests/wc-job.json
  output: {count_output: 16}
  tool: tests/count-lines15-wf.cwl
  doc: Test twice nested subworkflow
  id: workflow_embedded_subworkflow_embedded_subsubworkflow
  tags: [ workflow, subworkflow, inline_javascript ]

- job: tests/wc-job.json
  output: {count_output: 16}
  tool: tests/count-lines16-wf.cwl
  id: workflow_embedded_subworkflow_with_tool_and_subsubworkflow
  doc: Test subworkflow of mixed depth with tool first
  tags: [ workflow, subworkflow, inline_javascript ]

- job: tests/wc-job.json
  output: {count_output: 16}
  tool: tests/count-lines17-wf.cwl
  id: workflow_embedded_subworkflow_with_subsubworkflow_and_tool
  doc: Test subworkflow of mixed depth with tool after
  tags: [ workflow, subworkflow, inline_javascript ]

- job: tests/record-output-job.json
  output:
    "orec": {
        "ofoo": {
            "location": "foo",
            "size": 1111,
            "class": "File",
            "checksum": "sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376"
        },
        "obar": {
            "location": "bar",
            "size": 12010,
            "class": "File",
            "checksum": "sha1$aeb3d11bdf536511649129f4077d5cda6a324118"
        }
    }
  tool: tests/record-output-wf.cwl
  id: workflow_records_inputs_and_outputs
  doc: Test record type inputs to and outputs from workflows.
  tags: [ workflow, shell_command ]

- job: tests/io-int.json
  output: {"o": 10}
  tool: tests/io-int-wf.cwl
  id: workflow_integer_input
  doc: Test integer workflow input and outputs
  tags: [ workflow, inline_javascript, expression_tool ]

- job: tests/io-int.json
  output: {"o": 10}
  tool: tests/io-int-optional-wf.cwl
  id: workflow_integer_input_optional_specified
  doc: Test optional integer workflow inputs (specified)
  tags: [ workflow, inline_javascript, expression_tool ]

- job: tests/empty.json
  output: {"o": 4}
  tool: tests/io-int-optional-wf.cwl
  id: workflow_integer_input_optional_unspecified
  doc: Test optional integer workflow inputs (unspecified)
  tags: [ workflow, inline_javascript, expression_tool ]

- job: tests/io-int.json
  output: {"o": 10}
  tool: tests/io-int-default-wf.cwl
  id: workflow_integer_input_default_specified
  doc: Test default integer workflow inputs (specified)
  tags: [ workflow, inline_javascript, expression_tool ]

- job: tests/empty.json
  output: {"o": 8}
  tool: tests/io-int-default-wf.cwl
  id: workflow_integer_input_default_unspecified
  doc: Test default integer workflow inputs (unspecified)
  tags: [ workflow, inline_javascript, expression_tool ]

- job: tests/empty.json
  output: {"o": 13}
  tool: tests/io-int-default-tool-and-wf.cwl
  id: workflow_integer_input_default_and_tool_integer_input_default
  doc: Test default integer tool and workflow inputs (unspecified)
  tags: [ workflow, inline_javascript, expression_tool ]

- job: tests/empty.json
  output: {"o": {
            "class": "File",
            "basename": "output",
            "size": 1111,
            "location": Any,
            "checksum": "sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376"
  }}
  tool: tests/io-file-default-wf.cwl
  id: workflow_file_input_default_unspecified
  doc: Test File input with default unspecified to workflow
  tags: [ workflow ]

- job: tests/default_path_job.yml
  output: {"o": {
                "class": "File",
                "basename": "output",
                "location": Any,
                "checksum": "sha1$47a013e660d408619d894b20806b1d5086aab03b",
                "size": 13
  }}
  tool: tests/io-file-default-wf.cwl
  id: workflow_file_input_default_specified
  doc: Test File input with default specified to workflow
  tags: [ workflow ]

- job: tests/job-input-array-one-empty-file.json
  output: {"output_file":
    {
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "basename": "output.txt",
        "location": Any,
        "class": "File",
        "size": 0
  }}
  tool: tests/io-file-or-files.cwl
  id: clt_optional_union_input_file_or_files_with_array_of_one_file_provided
  doc: Test input union type or File or File array to a tool with one file in array specified.
  tags: [ command_line_tool, inline_javascript ]

- job: tests/job-input-array-few-files.json
  output: {"output_file":
    {
        "checksum": "sha1$6d1723861ad5a1260f1c3c07c93076c5a215f646",
        "basename": "output.txt",
        "location": Any,
        "class": "File",
        "size": 1114
  }}
  tool: tests/io-file-or-files.cwl
  id: clt_optional_union_input_file_or_files_with_many_files_provided
  doc: Test input union type or File or File array to a tool with a few files in array specified.
  tags: [ command_line_tool, inline_javascript ]

- job: tests/job-input-one-file.json
  output: {"output_file":
    {
        "checksum": "sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376",
        "basename": "output.txt",
        "location": Any,
        "class": "File",
        "size": 1111
  }}
  tool: tests/io-file-or-files.cwl
  id: clt_optional_union_input_file_or_files_with_single_file_provided
  doc: Test input union type or File or File array to a tool with one file specified.
  tags: [ command_line_tool, inline_javascript ]

- job: tests/job-input-null.json
  output: {"output_file":
    {
        "checksum": "sha1$503458abf7614be3fb26d85ff5d8f3e17aa0a552",
        "basename": "output.txt",
        "location": Any,
        "class": "File",
        "size": 10
  }}
  tool: tests/io-file-or-files.cwl
  id: clt_optional_union_input_file_or_files_with_nothing_provided
  doc: Test input union type or File or File array to a tool with null specified.
  tags: [ command_line_tool, inline_javascript ]

- job: tests/io-any-int.json
  output: {"t1": 7}
  tool: tests/io-any-1.cwl
  id: clt_any_input_with_integer_provided
  doc: Test Any parameter with integer input to a tool
  tags: [ command_line_tool, inline_javascript ]

- job: tests/io-any-string.json
  output: {"t1": "7"}
  tool: tests/io-any-1.cwl
  id: clt_any_input_with_string_provided
  doc: Test Any parameter with string input to a tool
  tags: [ command_line_tool, inline_javascript ]

- job: tests/io-any-file.json
  output: {"t1": "File"}
  tool: tests/io-any-1.cwl
  id: clt_any_input_with_file_provided
  doc: Test Any parameter with file input to a tool
  tags: [ command_line_tool, inline_javascript ]

- job: tests/io-any-array.json
  output: {"t1": [1, "moocow"]}
  tool: tests/io-any-1.cwl
  id: clt_any_input_with_mixed_array_provided
  doc: Test Any parameter with array input to a tool
  tags: [ command_line_tool, inline_javascript ]

- job: tests/io-any-record.json
  output: {"t1": {"moo": 1, "cow": 5}}
  tool: tests/io-any-1.cwl
  id: clt_any_input_with_record_provided
  doc: Test Any parameter with record input to a tool
  tags: [ command_line_tool, inline_javascript ]

- job: tests/io-any-int.json
  output: {"t1": 7}
  tool: tests/io-any-wf-1.cwl
  id: workflow_any_input_with_integer_provided
  doc: Test Any parameter with integer input to a workflow
  tags: [ workflow, inline_javascript ]

- job: tests/io-any-string.json
  output: {"t1": "7"}
  tool: tests/io-any-wf-1.cwl
  id: workflow_any_input_with_string_provided
  doc: Test Any parameter with string input to a workflow
  tags: [ workflow, inline_javascript ]

- job: tests/io-any-file.json
  output: {"t1": "File"}
  tool: tests/io-any-wf-1.cwl
  id: workflow_any_input_with_file_provided
  doc: Test Any parameter with file input to a workflow
  tags: [ workflow, inline_javascript ]

- job: tests/io-any-array.json
  output: {"t1": [1, "moocow"]}
  tool: tests/io-any-wf-1.cwl
  id: workflow_any_input_with_mixed_array_provided
  doc: Test Any parameter with array input to a workflow
  tags: [ workflow, inline_javascript ]

- job: tests/io-any-record.json
  output: {"t1": {"moo": 1, "cow": 5}}
  tool: tests/io-any-wf-1.cwl
  id: workflow_any_input_with_record_provided
  doc: Test Any parameter with record input to a tool
  tags: [ workflow, inline_javascript ]

- job: tests/empty.json
  output: {"o": "the default value"}
  tool: tests/io-union-input-default-wf.cwl
  id: workflow_union_default_input_unspecified
  doc: Test union type input to workflow with default unspecified
  tags: [ workflow, inline_javascript, expression_tool ]

- job: tests/io-any-file.json
  output: {"o": "File"}
  tool: tests/io-union-input-default-wf.cwl
  id: workflow_union_default_input_with_file_provided
  doc: Test union type input to workflow with default specified as file
  tags: [ workflow, inline_javascript, expression_tool ]

- job: tests/empty.json
  output: {"val": "moocow\n"}
  tool: tests/step-valuefrom4-wf.cwl
  id: workflowstep_valuefrom_string
  doc: Test valueFrom on workflow step from literal (string).
  tags: [ workflow, step_input ]

- job: tests/wc-job.json
  output: {"val1": "whale.txt\n", "val2": "step1_out\n"}
  tool: tests/step-valuefrom5-wf.cwl
  id: workflowstep_valuefrom_file_basename
  doc: Test valueFrom on workflow step using basename.
  tags: [ workflow, step_input ]

- job: tests/output-arrays-int-job.json
  output: {"o": [0, 1, 2]}
  tool: tests/output-arrays-int.cwl
  id: expression_tool_int_array_output
  doc: Test output arrays in a tool (with ints).
  tags: [ expression_tool, inline_javascript ]

- job: tests/output-arrays-int-job.json
  output: {"o": 12}
  tool: tests/output-arrays-int-wf.cwl
  id: workflowstep_int_array_input_output
  doc: Test output arrays in a workflow (with ints).
  tags: [ workflow, expression_tool, inline_javascript ]

- job: tests/output-arrays-file-job.json
  output: {"o": [
    {
        "basename": "moo",
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "class": "File",
        "location": Any,
        "size": 0
    },
    {
        "basename": "cow",
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "class": "File",
        "location": Any,
        "size": 0
    }
  ]}
  tool: tests/output-arrays-file-wf.cwl
  id: workflow_file_array_output
  doc: Test output arrays in a workflow (with Files).
  tags: [ workflow, expression_tool, inline_javascript ]

- job: "tests/empty.json"
  output: {"cow":
    {
        "checksum": "sha1$7a788f56fa49ae0ba5ebde780efe4d6a89b5db47",
        "basename": "cow",
        "class": "File",
        "size": 4,
        "location": Any
  }}
  tool: "tests/docker-run-cmd.cwl"
  id: docker_entrypoint
  doc: Test Docker ENTRYPOINT usage
  tags: [ command_line_tool, docker ]

- job: "tests/job-input-array-one-empty-file.json"
  output: {"output_file":
    {
        "checksum": "sha1$dad5a8472b87f6c5ef87d8fc6ef1458defc57250",
        "basename": "output.txt",
        "location": Any,
        "class": "File",
        "size": 11
  }}
  tool: "tests/size-expression-tool.cwl"
  id: clt_file_size_property_with_empty_file
  doc: Test use of size in expressions for an empty file
  tags: [ command_line_tool, inline_javascript ]

- job: "tests/job-input-array-few-files.json"
  output: {"output_file":
    {
        "checksum": "sha1$9def39730e8012bd09bf8387648982728501737d",
        "basename": "output.txt",
        "location": Any,
        "class": "File",
        "size": 31
  }}
  tool: "tests/size-expression-tool.cwl"
  id: clt_file_size_property_with_multi_file
  doc: Test use of size in expressions for a few files
  tags: [ command_line_tool, inline_javascript ]

- job: tests/null-expression-echo-job.json
  tool: tests/echo-tool.cwl
  should_fail: true
  id: any_without_defaults_unspecified_fails
  doc: Test Any without defaults, unspecified, should fail.
  tags: [ command_line_tool, required ]

- job: tests/null-expression1-job.json
  tool: tests/echo-tool.cwl
  should_fail: true
  id: any_without_defaults_specified_fails
  doc: Test Any without defaults, specified, should fail.
  tags: [ command_line_tool, required ]

- job: tests/empty.json
  output:
    wc_output:
        class: File
        checksum: sha1$3596ea087bfdaf52380eae441077572ed289d657
        size: 3
  tool: tests/count-lines9-wf-noET.cwl
  id: step_input_default_value_noexp
  doc: Test default value on step input parameter, no ExpressionTool
  tags: [ workflow, required ]

- job: tests/cat-job.json
  output:
    wc_output:
        class: File
        checksum: sha1$e5fa44f2b31c1fb553b6021e7360d07d5d91ff5e
        size: 2
  tool: tests/count-lines11-wf-noET.cwl
  id: step_input_default_value_overriden_noexp
  doc: Test default value on step input parameter overridden by provided source, no ExpressionTool
  tags: [ workflow, required ]

- job: tests/wc-job.json
  output:
    wc_output:
        class: File
        checksum: sha1$3596ea087bfdaf52380eae441077572ed289d657
        size: 3
  id: nested_workflow_noexp
  tool: tests/count-lines8-wf-noET.cwl
  doc: Test nested workflow, without ExpressionTool
  tags: [ workflow, subworkflow ]

- job: tests/sum-job.json
  output:
    result:
        class: File
        checksum: sha1$ad552e6dc057d1d825bf49df79d6b98eba846ebe
        size: 3
  id: wf_multiplesources_multipletypes_noexp
  tool: tests/sum-wf-noET.cwl
  doc: Test step input with multiple sources with multiple types, without ExpressionTool
  tags: [ workflow, step_input, inline_javascript, multiple_input ]

- tool: tests/dynresreq-workflow-tooldefault.cwl
  job: tests/empty.json
  output:
    cores:
        location: output
        size: 2
        class: File
        checksum: sha1$7448d8798a4380162d4b56f9b452e2f6f9e24e7a
  id: dynamic_resreq_wf_optional_file_default
  doc: >-
    Within a workflow, test accessing the size attribute of an optional input
    File as part of a CommandLineTool's ResourceRequirement calculation. The
    CommandLineTool input has a default value (a local file) and the workflow
    nor the workflow step does not provide any value for this input.
  tags: [ workflow, resource ]

- tool: tests/dynresreq-workflow-stepdefault.cwl
  job: tests/empty.json
  output:
    cores:
        location: output
        size: 2
        class: File
        checksum: sha1$7448d8798a4380162d4b56f9b452e2f6f9e24e7a
  id: dynamic_resreq_wf_optional_file_step_default
  doc: >-
    Within a workflow, test accessing the size attribute of an optional input
    File as part of a CommandLineTool's ResourceRequirement calculation. The
    workflow step provides a default value (a local file) for this input and
    the workflow itself does not provide any value for this input.
  tags: [ workflow, resource ]

- tool: tests/dynresreq-workflow-inputdefault.cwl
  job: tests/empty.json
  id: dynamic_resreq_wf_optional_file_wf_default
  output:
    cores:
        location: output
        size: 2
        class: File
        checksum: sha1$7448d8798a4380162d4b56f9b452e2f6f9e24e7a
  doc: >-
    Within a workflow, test accessing the size attribute of an optional input
    File as part of a CommandLineTool's ResourceRequirement calculation. The
    workflow itelf provides a default value (a local file) for this input.
  tags: [ workflow, resource ]

- job: tests/cat-job.json
  output: {count_output: 1}
  id: step_input_default_value_overriden_2nd_step
  tool: tests/count-lines11-extra-step-wf.cwl
  doc: >-
    Test default value on step input parameter overridden by provided source.
    With passthrough first step
  tags: [ workflow, inline_javascript ]

- job: tests/cat-job.json
  output:
    wc_output:
        class: File
        checksum: sha1$e5fa44f2b31c1fb553b6021e7360d07d5d91ff5e
        size: 2
  id: step_input_default_value_overriden_2nd_step_noexp
  tool: tests/count-lines11-extra-step-wf-noET.cwl
  doc: >-
    Test default value on step input parameter overridden by provided source.
    With passthrough first step and no ExpressionTool
  tags: [ workflow, required ]

- job: tests/empty.json
  output: {count_output: 16}
  id: step_input_default_value_overriden_2nd_step_null
  tool: tests/count-lines11-null-step-wf.cwl
  doc: >-
    Test default value on step input parameter overridden by provided source.
    With null producing first step
  tags: [ workflow, inline_javascript ]

- job: tests/empty.json
  output:
    wc_output:
        class: File
        checksum: sha1$3596ea087bfdaf52380eae441077572ed289d657
        size: 3
  id: step_input_default_value_overriden_2nd_step_null_noexp
  tool: tests/count-lines11-null-step-wf-noET.cwl
  doc: >-
    Test default value on step input parameter overridden by provided source.
    With null producing first step and no ExpressionTool
  tags: [ workflow, required ]

- tool: tests/cat-from-dir.cwl
  job: tests/cat-from-dir-job.yaml
  output:
    output:
      checksum: sha1$47a013e660d408619d894b20806b1d5086aab03b
      class: File
      size: 13
  id: stdin_from_directory_literal_with_local_file
  doc: Pipe to stdin from user provided local File via a Directory literal
  tags: [ command_line_tool, required ]

- tool: tests/cat-from-dir.cwl
  job: tests/cat-from-dir-with-literal-file.yaml
  output:
    output:
      checksum: sha1$ef88e689559565999700d6fea7cf7ba306d04360
      class: File
      size: 26
  id: stdin_from_directory_literal_with_literal_file
  doc: Pipe to stdin from literal File via a Directory literal
  tags: [ command_line_tool, required ]

- tool: tests/cat3-from-dir.cwl
  job: tests/cat-from-dir-with-literal-file.yaml
  output:
    output_file:
      checksum: sha1$ef88e689559565999700d6fea7cf7ba306d04360
      class: File
      size: 26
  id: directory_literal_with_literal_file_nostdin
  doc: Test non-stdin reference to literal File via a Directory literal
  tags: [ command_line_tool, required ]

- tool: tests/no-inputs-tool.cwl
  output:
    output:
      checksum: sha1$1334e67fe9eb70db8ae14ccfa6cfb59e2cc24eae
      location: output
      class: File
      size: 4
  id: no_inputs_commandlinetool
  doc: Test CommandLineTool without inputs
  tags: [ command_line_tool, required ]

- tool: tests/no-outputs-tool.cwl
  job: tests/cat-job.json
  output: {}
  id: no_outputs_commandlinetool
  doc: Test CommandLineTool without outputs
  tags: [ command_line_tool, required ]

- tool: tests/no-inputs-wf.cwl
  output:
    output:
      checksum: sha1$1334e67fe9eb70db8ae14ccfa6cfb59e2cc24eae
      location: output
      class: File
      size: 4
  id: no_inputs_workflow
  doc: Test Workflow without inputs
  tags: [ workflow, required ]

- tool: tests/no-outputs-wf.cwl
  job: tests/cat-job.json
  output: {}
  id: no_outputs_workflow
  doc: Test Workflow without outputs
  tags: [ workflow, required ]

- tool: tests/anon_enum_inside_array.cwl
  job: tests/anon_enum_inside_array.yml
  output:
    result:
      class: File
      checksum: "sha1$2132943d72c39423e0b9425cbc40dfd5bf3e9cb2"
      size: 39
  id: anonymous_enum_in_array
  doc: Test an anonymous enum inside an array inside a record
  tags: [command_line_tool, required]

- tool: tests/anon_enum_inside_array_inside_schemadef.cwl
  job: tests/anon_enum_inside_array_inside_schemadef.yml
  output:
    result:
      class: File
      checksum: "sha1$f17c7d81f66e1520fca25b96b90eeeae5bbf08b0"
      size: 39
  id: schema-def_anonymous_enum_in_array
  doc: Test an anonymous enum inside an array inside a record, SchemaDefRequirement
  tags: [command_line_tool, schema_def]

- job: tests/wc-job.json
  output:
    output:
      class: File
      checksum: sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376
      location: output
      size: 1111
  tool: tests/cat-tool-shortcut.cwl
  id: stdin_shorcut
  doc: Test command execution in with stdin and stdout redirection using stdin shortcut
  tags: [ command_line_tool, docker ]

- job: tests/record-secondaryFiles-job.yml
  output: {}
  tool: tests/record-in-secondaryFiles.cwl
  id: secondary_files_in_unnamed_records
  doc: Test secondaryFiles on anonymous record fields
  tags: [ command_line_tool, required ]

- job: tests/record-secondaryFiles-job.yml
  output: {}
  tool: tests/record-sd-secondaryFiles.cwl
  id: secondary_files_in_named_records
  doc: Test secondaryFiles on SchemaDefRequirement record fields
  tags: [ command_line_tool, schema_def ]

- job: tests/empty.json
  output: {
    "record_output": {
        "f1": {
            "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
            "location": "A",
            "secondaryFiles": [
                {
                    "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                    "location": "A.s2",
                    "class": "File",
                    "size": 0
                }
            ],
            "class": "File",
            "size": 0
        },
        "f2": [
            {
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "location": "B",
                "secondaryFiles": [
                    {
                        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                        "location": "B.s3",
                        "class": "File",
                        "size": 0
                    }
                ],
                "class": "File",
                "size": 0
            },
            {
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "location": "C",
                "secondaryFiles": [
                    {
                        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                        "location": "C.s3",
                        "class": "File",
                        "size": 0
                    }
                ],
                "class": "File",
                "size": 0
            }
        ]
    }
  }
  tool: tests/record-out-secondaryFiles.cwl
  id: secondary_files_in_output_records
  doc: Test secondaryFiles on output record fields
  tags: [ command_line_tool, required ]

- job: tests/record-secondaryFiles-job.yml
  output: {}
  tool: tests/record-in-secondaryFiles-wf.cwl
  id: secondary_files_workflow_propagation
  doc: Test secondaryFiles propagation through workflow
  tags: [ workflow, required ]

- job: tests/record-secondaryFiles-job.yml
  should_fail: true
  tool: tests/record-in-secondaryFiles-missing-wf.cwl
  id: secondary_files_missing
  doc: Test checking when secondaryFiles are missing
  tags: [ workflow, required ]

- job: tests/record-format-job.yml
  output: {}
  tool: tests/record-in-format.cwl
  id: input_records_file_entry_with_format
  doc: Test format on anonymous record fields
  tags: [ command_line_tool, required ]

- job: tests/record-format-job2.yml
  should_fail: true
  tool: tests/record-in-format.cwl
  id: input_records_file_entry_with_format_and_bad_regular_input_file_format
  doc: Test file format checking on parameter
  tags: [ command_line_tool, format_checking ]

- job: tests/record-format-job3.yml
  should_fail: true
  tool: tests/record-in-format.cwl
  doc: Test file format checking on record field
  id: input_records_file_entry_with_format_and_bad_entry_file_format
  tags: [ command_line_tool, format_checking ]

- job: tests/record-format-job4.yml
  should_fail: true
  tool: tests/record-in-format.cwl
  doc: Test file format checking on array item
  id: input_records_file_entry_with_format_and_bad_entry_array_file_format
  tags: [ command_line_tool, format_checking ]

- job: tests/record-secondaryFiles-job.yml
  output: {
    "f1out": {
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "class": "File",
        "location": "A",
        "size": 0,
        "format": "http://example.com/format1"
    },
    "record_output": {
        "f2out": {
            "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
            "class": "File",
            "location": "B",
            "size": 0,
            "format": "http://example.com/format2"
        }
    }
  }
  tool: tests/record-out-format.cwl
  id: record_output_file_entry_format
  doc: Test format on output record fields
  tags: [ command_line_tool, format_checking ]

- job: tests/wf-loadContents-job.yml
  output: {
    "my_int": 42
  }
  tool: tests/wf-loadContents.cwl
  id: workflow_input_inputBinding_loadContents
  doc: Test WorkflowInputParameter.inputBinding.loadContents
  tags: [ workflow, step_input, inline_javascript, expression_tool ]

- job: tests/wf-loadContents-job.yml
  output: {
    "my_int": 42
  }
  tool: tests/wf-loadContents2.cwl
  doc: Test WorkflowInputParameter.loadContents
  id: workflow_input_loadContents_without_inputBinding
  tags: [ workflow, step_input, inline_javascript, expression_tool ]

- job: tests/wf-loadContents-job.yml
  output: {
    "my_int": 42
  }
  tool: tests/wf-loadContents3.cwl
  id: expression_tool_input_loadContents
  doc: Test loadContents on InputParameter.loadContents (expression)
  tags: [ workflow, step_input, inline_javascript, expression_tool ]

- job: tests/wf-loadContents-job.yml
  output: {
    "my_int": 42
  }
  tool: tests/wf-loadContents4.cwl
  id: workflow_step_in_loadContents
  doc: Test WorkflowStepInput.loadContents
  tags: [ workflow, step_input, inline_javascript, expression_tool ]

- job: tests/empty.json
  should_fail: true
  tool: tests/timelimit.cwl
  id: timelimit_basic
  doc: Test that job fails when exceeding time limit
  tags: [ command_line_tool, timelimit, work_reuse ]

- job: tests/empty.json
  should_fail: true
  tool: tests/timelimit2.cwl
  id: timelimit_invalid
  doc: Test invalid time limit value
  tags: [ command_line_tool, timelimit, json_schema_invalid ]

- job: tests/empty.json
  output: {}
  tool: tests/timelimit3.cwl
  id: timelimit_zero_unlimited
  doc: Test zero timelimit means no limit
  tags: [ command_line_tool, timelimit, work_reuse ]

- job: tests/empty.json
  should_fail: true
  tool: tests/timelimit4.cwl
  id: timelimit_from_expression
  doc: Test expression in time limit
  tags: [ command_line_tool, timelimit, inline_javascript, work_reuse ]

- job: tests/empty.json
  output:
    status: Done
  tool: tests/timelimit5.cwl
  id: timelimit_expressiontool
  doc: Test timelimit in expressiontool is ignored
  tags: [ expression_tool, timelimit, inline_javascript ]

- job: tests/empty.json
  should_fail: true
  tool: tests/timelimit-wf.cwl
  id: timelimit_basic_wf
  doc: Test that tool in workflow fails when exceeding time limit
  tags: [ workflow, timelimit ]

- job: tests/empty.json
  output:
    o: time passed
  tool: tests/timelimit2-wf.cwl
  id: timelimit_invalid_wf
  doc: Test that workflow level time limit is not applied to workflow execution time
  tags: [ workflow, timelimit, inline_javascript ]

- job: tests/empty.json
  output:
    o: time passed
  tool: tests/timelimit3-wf.cwl
  id: timelimit_zero_unlimited_wf
  doc: Test zero timelimit means no limit in workflow
  tags: [ workflow, timelimit, inline_javascript, work_reuse ]

- job: tests/empty.json
  should_fail: true
  tool: tests/timelimit4-wf.cwl
  id: timelimit_from_expression_wf
  doc: Test expression in time limit in workflow
  tags: [ workflow, timelimit, inline_javascript, work_reuse ]

- job: tests/empty.json
  output: {}
  tool: tests/networkaccess.cwl
  doc: Test networkaccess enabled
  id: networkaccess
  tags: [ command_line_tool, networkaccess ]

- job: tests/empty.json
  should_fail: true
  tool: tests/networkaccess2.cwl
  id: networkaccess_disabled
  doc: Test networkaccess is disabled by default
  tags: [ networkaccess, command_line_tool ]

- job: tests/stage-array-job.json
  tool: tests/stage-array.cwl
  doc: Test null and array input in InitialWorkDirRequirement
  output:
      "output": {
        "basename": "lsout",
        "checksum": "sha1$e453d26efd859a9abc80ae1a1d9d63db72376053",
        "class": "File",
        "location": "lsout",
        "size": 32
      }
  tags: [ resource, command_line_tool, initial_work_dir ]
  id: initial_work_dir_for_null_and_arrays

- job: tests/stage-array-dirs-job.yml
  tool: tests/stage-array-dirs.cwl
  doc: Test array of directories InitialWorkDirRequirement
  output: {
    "output": [
            {
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "class": "File",
                "location": "a",
                "size": 0
            },
            {
                "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
                "class": "File",
                "location": "B",
                "size": 0
            }
        ]
    }
  tags: [ resource, command_line_tool, initial_work_dir ]
  id: initial_work_dir_for_array_dirs

- job: tests/env-job3.yaml
  output:
    out:
      class: File
      checksum: sha1$b3ec4ed1749c207e52b3a6d08c59f31d83bff519
      location: out
      size: 15
  tool: tests/env-tool3.cwl
  id: cwl_requirements_addition
  doc: Test requirements in input document via EnvVarRequirement
  tags: [ command_line_tool, input_object_requirements ]

- job: tests/env-job3.yaml
  output:
    out:
      class: File
      checksum: sha1$b3ec4ed1749c207e52b3a6d08c59f31d83bff519
      location: out
      size: 15
  tool: tests/env-tool4.cwl
  id: cwl_requirements_override_expression
  doc: Test conflicting requirements in input document via EnvVarRequirement and expression
  tags: [ command_line_tool, input_object_requirements ]

- job: tests/env-job4.yaml
  output:
    out:
      class: File
      checksum: sha1$715e62184492851512a020c36ab7118eca114a59
      location: out
      size: 23
  id: cwl_requirements_override_static
  tool: tests/env-tool3.cwl
  doc: Test conflicting requirements in input document via EnvVarRequirement
  tags: [ command_line_tool, input_object_requirements ]

- job: tests/initialworkdirrequirement-docker-out-job.json
  output:
    OUTPUT:
      "checksum": "sha1$aeb3d11bdf536511649129f4077d5cda6a324118"
      "location": "ref.fasta"
      "secondaryFiles": [{
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "location": "ref.fasta.fai",
          "class": "File",
          "size": 0
      }]
      "class": "File"
      "size": 12010
  tool: tests/initialworkdir-glob-fullpath.cwl
  id: initial_workdir_output_glob
  doc: Test full path glob output of InitialWorkDir
  tags: [ initial_work_dir, command_line_tool ]

- job: tests/empty.json
  should_fail: true
  tool: tests/glob-path-error.cwl
  id: glob_outside_outputs_fails
  doc: Test fail trying to glob outside output directory
  tags: [ command_line_tool, docker ]

- job: tests/empty.json
  tool: tests/symlink-illegal.cwl
  doc: symlink to file outside of working directory should NOT be retrieved
  output:
    output_file:
      "class": "File"
      "size": 27
      "baesname": "symlink.txt"
      "checksum": "sha1$cd28ec34f3f9425aca544b6332453708e8aaa82a"
  should_fail: true
  tags: [ command_line_tool ]
  id: illegal_symlink

- job: tests/empty.json
  tool: tests/symlink-legal.cwl
  doc: symlink to file inside of working directory should be retrieved
  output:
    output_file:
      "class": "File"
      "size": 27
      "basename": "symlink.txt"
      "checksum": "sha1$cd28ec34f3f9425aca544b6332453708e8aaa82a"
  tags: [ command_line_tool ]
  id: legal_symlink

- job: tests/empty.json
  tool: tests/inp_update_wf.cwl
  doc: inplace update has side effect on file content
  tags: [ inplace_update, workflow ]
  output:
    a: 4
    b: 4
  id: modify_file_content

- job: tests/empty.json
  tool: tests/inpdir_update_wf.cwl
  doc: inplace update has side effect on directory content
  tags: [ inplace_update, workflow ]
  output: {
    a: [
            {
                "basename": "blurb",
                "class": "File",
                "location": "blurb"
            }
        ],
    b: [
            {
                "basename": "blurb",
                "class": "File",
                "location": "blurb"
            }
        ]
  }
  id: modify_directory_content

- doc: Test that OutputBinding.glob accepts Directories
  job: tests/empty.json
  id: outputbinding_glob_directory
  tool: tests/glob_directory.cwl
  output:
    directories:
        - basename: "a_dir"
          class: "Directory"
          listing: []
        - basename: "b_dir"
          class: "Directory"
          listing: []
        - basename: "c_dir"
          class: "Directory"
          listing: []
  tags: [ required, command_line_tool ]

- doc: Test that array of input files can be staged to directory with entryname
  id: stage_file_array
  tool: tests/stage_file_array.cwl
  job: tests/stage_file_array.job.json
  output:
    output:
      [
        {
          "basename": "sfa-1.txt",
          "checksum": "sha1$4c1cd0638ab3580310823fd1556d27ecb4816df6",
          "class": "File",
          "size": 49
        },
        {
          "basename": "sfa-1.txt.sec",
          "checksum": "sha1$40f4ee1bcd1a9466fcd2e48cf7fc3798025d2f9a",
          "class": "File",
          "size": 59
        },
        {
          "basename": "sfa-2.txt",
          "checksum": "sha1$4c1cd0638ab3580310823fd1556d27ecb4816df6",
          "class": "File",
          "size": 49
        },
        {
          "basename": "sfa-2.txt.sec",
          "checksum": "sha1$40f4ee1bcd1a9466fcd2e48cf7fc3798025d2f9a",
          "class": "File",
          "size": 59
        }
      ]
  tags: [ command_line_tool, initial_work_dir, inline_javascript ]

- doc: Test that array of input files can be staged to directory with basename
  id: stage_file_array_basename
  tool: tests/stage_file_array_basename.cwl
  job: tests/stage_file_array.job.json
  output:
    output:
      [
        {
          "basename": "sfa-1.txt",
          "checksum": "sha1$4c1cd0638ab3580310823fd1556d27ecb4816df6",
          "class": "File",
          "size": 49
        },
        {
          "basename": "sfa-1.txt.sec",
          "checksum": "sha1$40f4ee1bcd1a9466fcd2e48cf7fc3798025d2f9a",
          "class": "File",
          "size": 59
        },
        {
          "basename": "sfa-2.txt",
          "checksum": "sha1$4c1cd0638ab3580310823fd1556d27ecb4816df6",
          "class": "File",
          "size": 49
        },
        {
          "basename": "sfa-2.txt.sec",
          "checksum": "sha1$40f4ee1bcd1a9466fcd2e48cf7fc3798025d2f9a",
          "class": "File",
          "size": 59
        }
      ]
  tags: [ command_line_tool, initial_work_dir, inline_javascript ]

- doc: Test that if array of input files are staged to directory with basename and entryname, entryname overrides
  id: stage_file_array_entryname_overrides
  tool: tests/stage_file_array_basename_and_entryname.cwl
  job: tests/stage_file_array.job.json
  output:
    output:
      [
        {
          "basename": "sfa-1.txt",
          "checksum": "sha1$4c1cd0638ab3580310823fd1556d27ecb4816df6",
          "class": "File",
          "size": 49
        },
        {
          "basename": "sfa-1.txt.sec",
          "checksum": "sha1$40f4ee1bcd1a9466fcd2e48cf7fc3798025d2f9a",
          "class": "File",
          "size": 59
        },
        {
          "basename": "sfa-2.txt",
          "checksum": "sha1$4c1cd0638ab3580310823fd1556d27ecb4816df6",
          "class": "File",
          "size": 49
        },
        {
          "basename": "sfa-2.txt.sec",
          "checksum": "sha1$40f4ee1bcd1a9466fcd2e48cf7fc3798025d2f9a",
          "class": "File",
          "size": 59
        }
      ]
  tags: [ command_line_tool, initial_work_dir, inline_javascript ]

- job: tests/empty.json
  output:
    foo:
      class: File
      basename: foo
      checksum: sha1$fa98d6085770a79e44853d575cd3ab40c0f1f4de
  tool: tests/runtime-paths-distinct.cwl
  id: tmpdir_is_not_outdir
  doc: Test that runtime.tmpdir is not runtime.outdir
  tags: [ command_line_tool ]

- job: tests/listing-job.yml
  tool: tests/listing_none1.cwl
  id: listing_default_none
  output:
    out: true
  doc: Test that default behavior is 'no_listing' if not specified
  tags: [ command_line_tool ]

- job: tests/listing-job.yml
  tool: tests/listing_none2.cwl
  id: listing_requirement_none
  output:
    out: true
  doc: Test that 'listing' is not present when LoadListingRequirement is 'no_listing'
  tags: [ command_line_tool, load_listing ]

- job: tests/listing-job.yml
  tool: tests/listing_none3.cwl
  id: listing_loadListing_none
  output:
    out: true
  doc: Test that 'listing' is not present when loadListing on input parameter is 'no_listing'
  tags: [ command_line_tool ]

- job: tests/listing-job.yml
  tool: tests/listing_shallow1.cwl
  id: listing_requirement_shallow
  output:
    out: true
  doc: >
    Test that 'listing' is present in top directory object but not
    subdirectory object when LoadListingRequirement is
    'shallow_listing'
  tags: [ command_line_tool, load_listing ]

- job: tests/listing-job.yml
  tool: tests/listing_shallow2.cwl
  id: listing_loadListing_shallow
  output:
    out: true
  doc: >
    Test that 'listing' is present in top directory object but not
    subdirectory object when loadListing on input parameter loadListing is
    'shallow_listing'
  tags: [ command_line_tool ]

- job: tests/listing-job.yml
  tool: tests/listing_shallow3.cwl
  id: listing_outputBinding_loadListing
  output:
    out: {
        "basename": "file2",
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "class": "File",
        "location": "file2",
        "size": 0
    }
  doc: >
    Test that loadListing works when used on outputBinding.
  tags: [ command_line_tool ]

- job: tests/listing-job.yml
  tool: tests/listing_deep1.cwl
  id: listing_requirement_deep
  output:
    out: true
  doc: >
    Test that 'listing' is present in top directory object and in
    subdirectory objects when LoadListingRequirement is
    'deep_listing'
  tags: [ command_line_tool, load_listing ]

- job: tests/listing-job.yml
  tool: tests/listing_deep2.cwl
  id: listing_loadListing_deep
  output:
    out: true
  doc: >
    Test that 'listing' is present in top directory object and in
    subdirectory objects when input parameter loadListing is
    'deep_listing'
  tags: [ command_line_tool ]

- job: tests/echo-position-expr-job.yml
  tool: tests/echo-position-expr.cwl
  id: inputBinding_position_expr
  output:
    out: " 1 singular sensation!\n"
  doc: >
    Test for expression in the InputBinding.position field; also test using emoji in CWL document and tool output
  tags: [ command_line_tool, required ]

- job: tests/empty.json
  tool: tests/exitcode.cwl
  id: outputEval_exitCode
  output:
    code: 7
  doc: Can access exit code in outputEval
  tags: [ command_line_tool, required ]

- tool: tests/echo-tool-packed.cwl
  job: tests/env-job.json
  output:
    {"out": "hello test env\n"}
  id: any_input_param_graph_no_default
  doc: Test use of $graph without specifying which process to run
  tags: [ required, command_line_tool ]

- tool: tests/echo-tool-packed2.cwl
  job: tests/env-job.json
  output:
    {"out": "hello test env\n"}
  id: any_input_param_graph_no_default_hashmain
  doc: >
    Test use of $graph without specifying which process to run,
    hash-prefixed "main"
  tags: [ required, command_line_tool ]

- tool: tests/optional-numerical-output-0.cwl
  job: tests/empty.json
  output:
    {"out": 0}
  id: optional_numerical_output_returns_0_not_null
  doc: |
    Test that optional number output is returned as 0, not null
  tags: [ inline_javascript, command_line_tool ]

- job: tests/empty.json
  tool: tests/cores_float.cwl
  id: cores_float
  doc: Test float value for coresMin(Max) is rounded up in runtime.cores
  output:
     output: {
        "location": "cores.txt",
        "size": 2,
        "class": "File",
        "checksum": "sha1$7448d8798a4380162d4b56f9b452e2f6f9e24e7a"
     }
  tags: [ resource, command_line_tool ]

- job: tests/empty.json
  tool: tests/storage_float.cwl
  id: storage_float
  doc: Test float value for ram/tmpdir/outdir Min(Max) is rounded up
  output:
     output: {
        "location": "values.txt",
        "basename": "values.txt",
        "class": "File",
        "checksum": "sha1$c73f68407c144c5336a6c14e7ec79ee470231bd7",
        "size": 12
     }
  tags: [ resource, command_line_tool ]

- job: tests/synth-file-job.yml
  tool: tests/synth-file.cwl
  id: cat_synthetic_file
  doc: Test the generation of a synthetic file with inline contents.
  output:
    sequence: {
      "class": "File",
      "checksum": "sha1$5d64b71392b1e00a3ad893db02d381d58262c2d6",
      "size": 7
    }
  tags: [ required, command_line_tool ]

- $import: tests/string-interpolation/test-index.yaml

- $import: tests/conditionals/test-index.yaml
- $import: tests/secondaryfiles/test-index.yaml
- $import: tests/mixed-versions/test-index.yaml
- $import: tests/loadContents/test-index.yaml
- $import: tests/iwd/test-index.yaml
- $import: tests/scatter/test-index.yaml

- job: tests/empty.json
  tool: tests/params_broken_null.cwl
  id: params_broken_null
  doc: Test parameter reference that refers to null.something
  should_fail: true
  tags: [ required, command_line_tool ]

- job: tests/empty.json
  tool: tests/params_broken_length_of_non_list.cwl
  doc: Test parameter reference that refers to length of non-array input
  should_fail: true
  tags: [ required, command_line_tool ]
  id: length_for_non_array

- job: tests/length_non_array_input.yml
  tool: tests/params_input_length_non_array.cwl
  doc: Test 'length' in parameter reference where it does not refer to length of an array input
  tags: [ required, command_line_tool ]
  output:
    output1: 1
    output2: 2
    output3: 3
  id: user_defined_length_in_parameter_reference

- tool: tests/cat4-from-dir.cwl
  job: tests/cat-from-dir-with-literal-file-in-subdir.yaml
  output:
    output_file:
      checksum: sha1$ef88e689559565999700d6fea7cf7ba306d04360
      class: File
      size: 26
  id: directory_literal_with_literal_file_in_subdir_nostdin
  doc: Test non-stdin reference to literal File via a nested Directory literal
  tags: [ command_line_tool, required ]

- id: colon_in_paths
  output:
    log:
      class: File
      basename: re:sult
      checksum: sha1$d7d6491030bfa0ce17bab3a648e603f2a55bf503
      size: 14
    result:
      class: Directory
      basename: A:Gln2Cys_result
      listing:
        - basename: A:Gln2Cys
          checksum: sha1$2928c9c6fa02098aee8c31bf44099f3bf8c91013
          class: File
          size: 18
  job: tests/colon:test:job.yaml
  tool: tests/colon:test.cwl
  doc: Confirm that colons are tolerated in input paths, string values, stdout shortcut, and output file & directory names
  tags: [ required, command_line_tool ]

- id: colon_in_output_path
  output:
    result:
      class: Directory
      basename: A:Gln2Cys_result
      listing:
        - basename: hello.txt
          checksum: sha1$47a013e660d408619d894b20806b1d5086aab03b
          class: File
          size: 13
  job: tests/colon_test_output_job.yaml
  tool: tests/colon_test_output.cwl
  doc: Confirm that colons are tolerated in output directory names
  tags: [ required, command_line_tool ]

- id: record_with_default
  output:
    same_record:
        first: y
        second: 23
        third: 2.3
        fourth: 4242424242
        fifth: 4200000000000000000000000000000000000000000
        sixth:
           class: File
           basename: whale.txt
           size: 1111
           checksum: sha1$327fc7aedf4f6b69a42a7c8b808dc5a7aff61376
  tool: tests/paramref_arguments_roundtrip.cwl
  doc: Confirm that records with defaults are accepted
  tags: [ required, command_line_tool ]

- id: record_outputeval
  output:
    references:
      genome_fa:
        class: File
        basename: GRCm38.primary_assembly.genome.fa
        checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        size: 0
      annotation_gtf:
        class: File
        basename: gencode.vM21.primary_assembly.annotation.gtf
        checksum: sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709
        size: 0
  tool: tests/record_outputeval.cwl
  doc: Use of outputEval on a record itself, not the fields of the record
  tags: [ inline_javascript, command_line_tool ]

- id: record_outputeval_nojs
  output:
    references:
      annotation_gtf: gencode.vM21.primary_assembly.annotation.gtf
      genome_fa: GRCm38.primary_assembly.genome.fa
    summary:
      class: File
      checksum: sha1$c0bf6c4db73d4fc08ee24c7288825c09f9cb3cea
      size: 79
  tool: tests/record_outputeval_nojs.cwl
  doc: Use of outputEval on a record itself, not the fields of the record (without javascript)
  tags: [ required, command_line_tool ]

- id: staging-basename
  output: {}
  tool: tests/staging-basename/wf_ren.cwl
  doc: |
    Use of expression tool to change basename of file, then correctly staging
    the file using the new name.
  tags: [ workflow, inline_javascript, expression_tool ]

- id: runtime-outdir
  output: {
    "stuff": {
      "class": "Directory",
      "listing": [
        {
          "basename": "baz.txt",
          "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
          "class": "File",
          "size": 0
        },
        {
          "basename": "foo",
          "class": "Directory",
          "listing": [
            {
              "basename": "bar.txt",
              "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
              "class": "File",
              "size": 0
            }
          ]
        }
      ]
    }
  }
  tool: tests/runtime-outdir.cwl
  doc: |
    Use of $(runtime.outdir) for outputBinding glob.
  tags: [ required, command_line_tool ]

- tool: tests/record-order.cwl
  job: tests/record-order-job.json
  output:
    args: [-a, -b, '1', -c, '3', -d, -e, '2', -f, '4']
  id: record_order_with_input_bindings
  doc: Test sorting arguments at each level (inputBinding for all levels)
  tags: [ command_line_tool, required ]

- id: output_reference_workflow_input
  output: {
    "last": "me"
  }
  tool: tests/output_reference_workflow_input.cwl
  doc: |
    Direct use of Workflow level input fields in the outputs.
  tags: [ required, workflow ]

- id: stdout_chained_commands
  output: {
    "out": "a\nb\n"
  }
  tool: tests/stdout_chained_commands.cwl
  doc: |
    Test that chaining two echo calls causes the workflow tool to emit the output to stdout.
    This is to confirm that the workflow tool will **not** create an expression such as
    `echo a && echo b > out.txt`, but instead will produce the correct `echo a && echo b`,
    and capture the output correctly.
  tags: [ shell_command, command_line_tool ]

- id: multiple-input-feature-requirement
  output: {
    "hello_world_in_two_lines": [
      "hello\n",
      "world\n"
    ]
  }
  tool: tests/multiple_input_feature_requirement.cwl
  doc: |
    MultipleInputFeatureRequirement on workflow outputs.
  tags: [ workflow, multiple_input ]

- id: js-input-record
  # The output does not have the last \n due to the -n passed to echo
  output: {
    "out": "JS\nwith\nrecord"
  }
  tool: tests/js-input-record.cwl
  job: tests/js-input-record.json
  doc: |
    A test case for JS with an input record.
  tags: [ inline_javascript, command_line_tool ]

- tool: tests/schemadef_types_with_import-wf.cwl
  job: tests/schemadef_types_with_import-job.json
  output: {
    "out": "1970-01-01T00:00:00Z\n"
  }
  id: schemadef_types_with_import
  doc: >-
    Test SchemaDefRequirement with a workflow, with the `$import` under types.
    It is similar to schemadef-wf, but the `$import` is different.
  tags: [ workflow, schema_def ]

- id: filename_with_hash_mark
  tool: tests/cat-tool.cwl
  job: tests/octo.yml
  doc: Test for correct handling of URL-quoting in filename to refer to filename containing a hash mark
  output: {
    "output": {
        "basename": "output",
        "checksum": "sha1$06b0c59808c236447d065db8f7d2a60de0a805bf",
        "class": "File",
        "location": "output",
        "size": 8
    }
  }
  tags: [ required, command_line_tool ]

- id: capture_files
  tool: tests/capture-files.cwl
  job: tests/dir-job.yml
  doc: Test that a type error is raised if directories are returned by glob evaluation when type is File
  should_fail: true
  tags: [ required, command_line_tool ]

- id: capture_dirs
  tool: tests/capture-dirs.cwl
  job: tests/dir-job.yml
  doc: Test that a type error is raised if files are returned by glob evaluation when type is Directory
  should_fail: true
  tags: [ required, command_line_tool ]

- id: capture_files_and_dirs
  tool: tests/capture-files-and-dirs.cwl
  job: tests/dir-job.yml
  doc: Test that both files and directories are captured by glob evaluation when type is [Directory, File]
  output: {
    "result": [
      {
        "basename": "a",
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "class": "File",
        "size": 0
      },
      {
        "basename": "b",
        "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
        "class": "File",
        "size": 0
      },
      {
        "basename": "c",
        "class": "Directory",
        "listing": [
          {
            "basename": "d",
            "checksum": "sha1$da39a3ee5e6b4b0d3255bfef95601890afd80709",
            "class": "File",
            "size": 0
          }
        ]
      }
    ]
  }
  tags: [ required, command_line_tool ]

- id: very_big_and_very_floats
  doc: Confirm that very big and very small numbers are represented using decimals, not scientific notation
  tool: tests/floats_small_and_large.cwl
  job: tests/empty.json
  output: { "result": "0.00001 0.0000123 123000 1230000" }
  tags: [ inline_javascript, command_line_tool ]

- id: very_big_and_very_floats_nojs
  doc: Confirm that very big and very small numbers are represented using decimals, not scientific notation
  tool: tests/floats_small_and_large_nojs.cwl
  job: tests/empty.json
  output: {
    "result": {
        "basename": "dump",
        "class": "File",
        "checksum": "sha1$8a3913a553b8f29d47b99c1f4b0f6c2ee833cdc2",
        "size": 32
    }
  }
  tags: [ required, command_line_tool ]

- id: default_with_falsey_value
  job: tests/empty.json
  tool: tests/default_with_falsey_value.cwl
  doc: Confirms that "false"-like (but not 'null') values override any default
  output:
    out:
      class: File
      basename: file.txt
      size: 14
      checksum: sha1$0074b1841ab5103cc0442f739d9fb41a33b602ee
  tags: [ step_input, workflow ]

- id: nested_types
  job: tests/nested_types.yaml
  tool: tests/nested_types.cwl
  doc: demonstrate usage of nested types
  output:
    their_name: "Foo Bar"
  tags: [ require, command_line_tool ]

- id: paramref_arguments_runtime
  job: tests/empty.json
  tool: tests/paramref_arguments_runtime.cwl
  doc: confirm that $runtime is available to parameter references in arguments
  tags: [ required, command_line_tool ]
  output:
    runtime:
      cores: Any
      outdir: Any
      outdirSize: Any
      ram: Any
      tmpdir: Any
      tmpdirSize: Any

- id: paramref_arguments_self
  tool: tests/paramref_arguments_self.cwl
  job: tests/empty.json
  doc: confirm that $self is available and set to null in arguments
  tags: [ required, command_line_tool ]
  output:
    self: null

- id: paramref_arguments_inputs
  job: tests/empty.json
  tool: tests/paramref_arguments_inputs.cwl
  doc: confirm that $inputs is available to parameter references in arguments
  tags: [ required, command_line_tool ]
  output:
    result:
      a_double: 1000000000000000000000000000000000000000000
      a_float: 4.2
      a_long: 4147483647
      a_string: z
      a_string_array: [ a, b, c ]
      a_true: true
      an_array_of_doubles: [ 1000000000000000000000000000000000000000000, -1000000000000000000000000000000000000000000 ]
      an_array_of_falses: [ false, false, false ]
      an_array_of_floats: [ 2.3, 4.2 ]
      an_array_of_ints: [ 42, 23 ]
      an_array_of_longs: [ 4147483647, -4147483647 ]
      an_array_of_mixed_booleans: [ false, true, false ]
      an_array_of_trues: [ true, true, true ]
      an_int: 42

- $import: tests/loop/test-index.yaml
